{"ast":null,"code":"'use strict';function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}import Batchinator from\"../Batchinator\";import FillRateHelper from\"../FillRateHelper\";import PropTypes from'prop-types';import*as React from'react';import RefreshControl from\"../../../exports/RefreshControl\";import ScrollView from\"../../../exports/ScrollView\";import StyleSheet from\"../../../exports/StyleSheet\";import UIManager from\"../../../exports/UIManager\";import View from\"../../../exports/View\";import ViewabilityHelper from\"../ViewabilityHelper\";import findNodeHandle from\"../../../exports/findNodeHandle\";var flattenStyle=StyleSheet.flatten;import infoLog from\"../infoLog\";import invariant from'fbjs/lib/invariant';import warning from'fbjs/lib/warning';import{computeWindowedRenderLimits}from\"../VirtualizeUtils\";var __DEV__=process.env.NODE_ENV!=='production';var _usedIndexForKey=false;var _keylessItemComponentName='';var VirtualizedList=function(_React$PureComponent){_inheritsLoose(VirtualizedList,_React$PureComponent);var _proto=VirtualizedList.prototype;_proto.scrollToEnd=function scrollToEnd(params){var animated=params?params.animated:true;var veryLast=this.props.getItemCount(this.props.data)-1;var frame=this._getFrameMetricsApprox(veryLast);var offset=Math.max(0,frame.offset+frame.length+this._footerLength-this._scrollMetrics.visibleLength);this._scrollRef.scrollTo(this.props.horizontal?{x:offset,animated:animated}:{y:offset,animated:animated});};_proto.scrollToIndex=function scrollToIndex(params){var _this$props=this.props,data=_this$props.data,horizontal=_this$props.horizontal,getItemCount=_this$props.getItemCount,getItemLayout=_this$props.getItemLayout,onScrollToIndexFailed=_this$props.onScrollToIndexFailed;var animated=params.animated,index=params.index,viewOffset=params.viewOffset,viewPosition=params.viewPosition;invariant(index>=0&&index<getItemCount(data),\"scrollToIndex out of range: \"+index+\" vs \"+(getItemCount(data)-1));if(!getItemLayout&&index>this._highestMeasuredFrameIndex){invariant(!!onScrollToIndexFailed,'scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, '+'otherwise there is no way to know the location of offscreen indices or handle failures.');onScrollToIndexFailed({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:index});return;}var frame=this._getFrameMetricsApprox(index);var offset=Math.max(0,frame.offset-(viewPosition||0)*(this._scrollMetrics.visibleLength-frame.length))-(viewOffset||0);this._scrollRef.scrollTo(horizontal?{x:offset,animated:animated}:{y:offset,animated:animated});};_proto.scrollToItem=function scrollToItem(params){var item=params.item;var _this$props2=this.props,data=_this$props2.data,getItem=_this$props2.getItem,getItemCount=_this$props2.getItemCount;var itemCount=getItemCount(data);for(var _index=0;_index<itemCount;_index++){if(getItem(data,_index)===item){this.scrollToIndex(_objectSpread({},params,{index:_index}));break;}}};_proto.scrollToOffset=function scrollToOffset(params){var animated=params.animated,offset=params.offset;this._scrollRef.scrollTo(this.props.horizontal?{x:offset,animated:animated}:{y:offset,animated:animated});};_proto.recordInteraction=function recordInteraction(){this._nestedChildLists.forEach(function(childList){childList.ref&&childList.ref.recordInteraction();});this._viewabilityTuples.forEach(function(t){t.viewabilityHelper.recordInteraction();});this._updateViewableItems(this.props.data);};_proto.flashScrollIndicators=function flashScrollIndicators(){this._scrollRef.flashScrollIndicators();};_proto.getScrollResponder=function getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder){return this._scrollRef.getScrollResponder();}};_proto.getScrollableNode=function getScrollableNode(){if(this._scrollRef&&this._scrollRef.getScrollableNode){return this._scrollRef.getScrollableNode();}else{return findNodeHandle(this._scrollRef);}};_proto.getScrollRef=function getScrollRef(){if(this._scrollRef&&this._scrollRef.getScrollRef){return this._scrollRef.getScrollRef();}else{return this._scrollRef;}};_proto.setNativeProps=function setNativeProps(props){if(this._scrollRef){this._scrollRef.setNativeProps(props);}};_proto.getChildContext=function getChildContext(){return{virtualizedList:{getScrollMetrics:this._getScrollMetrics,horizontal:this.props.horizontal,getOutermostParentListRef:this._getOutermostParentListRef,getNestedChildState:this._getNestedChildState,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}};};_proto._getCellKey=function _getCellKey(){return this.context.virtualizedCell&&this.context.virtualizedCell.cellKey||'rootList';};_proto.hasMore=function hasMore(){return this._hasMore;};function VirtualizedList(_props,context){var _this;_this=_React$PureComponent.call(this,_props,context)||this;_this._getScrollMetrics=function(){return _this._scrollMetrics;};_this._getOutermostParentListRef=function(){if(_this._isNestedWithSameOrientation()){return _this.context.virtualizedList.getOutermostParentListRef();}else{return _assertThisInitialized(_this);}};_this._getNestedChildState=function(key){var existingChildData=_this._nestedChildLists.get(key);return existingChildData&&existingChildData.state;};_this._registerAsNestedChild=function(childList){var childListsInCell=_this._cellKeysToChildListKeys.get(childList.cellKey)||new Set();childListsInCell.add(childList.key);_this._cellKeysToChildListKeys.set(childList.cellKey,childListsInCell);var existingChildData=_this._nestedChildLists.get(childList.key);if(existingChildData&&existingChildData.ref!==null){console.error('A VirtualizedList contains a cell which itself contains '+'more than one VirtualizedList of the same orientation as the parent '+'list. You must pass a unique listKey prop to each sibling list.');}_this._nestedChildLists.set(childList.key,{ref:childList.ref,state:null});if(_this._hasInteracted){childList.ref.recordInteraction();}};_this._unregisterAsNestedChild=function(childList){_this._nestedChildLists.set(childList.key,{ref:null,state:childList.state});};_this._onUpdateSeparators=function(keys,newProps){keys.forEach(function(key){var ref=key!=null&&_this._cellRefs[key];ref&&ref.updateSeparatorProps(newProps);});};_this._averageCellLength=0;_this._cellKeysToChildListKeys=new Map();_this._cellRefs={};_this._frames={};_this._footerLength=0;_this._hasDataChangedSinceEndReached=true;_this._hasDoneInitialScroll=false;_this._hasInteracted=false;_this._hasMore=false;_this._hasWarned={};_this._headerLength=0;_this._hiPriInProgress=false;_this._highestMeasuredFrameIndex=0;_this._indicesToKeys=new Map();_this._nestedChildLists=new Map();_this._offsetFromParentVirtualizedList=0;_this._prevParentOffset=0;_this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0};_this._scrollRef=null;_this._sentEndForContentLength=0;_this._totalCellLength=0;_this._totalCellsMeasured=0;_this._viewabilityTuples=[];_this._captureScrollRef=function(ref){_this._scrollRef=ref;};_this._defaultRenderScrollComponent=function(props){var onRefresh=props.onRefresh;if(_this._isNestedWithSameOrientation()){return React.createElement(View,props);}else if(onRefresh){invariant(typeof props.refreshing==='boolean','`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `'+JSON.stringify(props.refreshing)+'`');return React.createElement(ScrollView,_extends({},props,{refreshControl:props.refreshControl==null?React.createElement(RefreshControl,{refreshing:props.refreshing,onRefresh:onRefresh,progressViewOffset:props.progressViewOffset}):props.refreshControl}));}else{return React.createElement(ScrollView,props);}};_this._onCellUnmount=function(cellKey){var curr=_this._frames[cellKey];if(curr){_this._frames[cellKey]=_objectSpread({},curr,{inLayout:false});}};_this._onLayout=function(e){if(_this._isNestedWithSameOrientation()){_this.measureLayoutRelativeToContainingList();}else{_this._scrollMetrics.visibleLength=_this._selectLength(e.nativeEvent.layout);}_this.props.onLayout&&_this.props.onLayout(e);_this._scheduleCellsToRenderUpdate();_this._maybeCallOnEndReached();};_this._onLayoutEmpty=function(e){_this.props.onLayout&&_this.props.onLayout(e);};_this._onLayoutFooter=function(e){_this._footerLength=_this._selectLength(e.nativeEvent.layout);};_this._onLayoutHeader=function(e){_this._headerLength=_this._selectLength(e.nativeEvent.layout);};_this._onContentSizeChange=function(width,height){if(width>0&&height>0&&_this.props.initialScrollIndex!=null&&_this.props.initialScrollIndex>0&&!_this._hasDoneInitialScroll){_this.scrollToIndex({animated:false,index:_this.props.initialScrollIndex});_this._hasDoneInitialScroll=true;}if(_this.props.onContentSizeChange){_this.props.onContentSizeChange(width,height);}_this._scrollMetrics.contentLength=_this._selectLength({height:height,width:width});_this._scheduleCellsToRenderUpdate();_this._maybeCallOnEndReached();};_this._convertParentScrollMetrics=function(metrics){var offset=metrics.offset-_this._offsetFromParentVirtualizedList;var visibleLength=metrics.visibleLength;var dOffset=offset-_this._scrollMetrics.offset;var contentLength=_this._scrollMetrics.contentLength;return{visibleLength:visibleLength,contentLength:contentLength,offset:offset,dOffset:dOffset};};_this._onScroll=function(e){_this._nestedChildLists.forEach(function(childList){childList.ref&&childList.ref._onScroll(e);});if(_this.props.onScroll){_this.props.onScroll(e);}var timestamp=e.timeStamp;var visibleLength=_this._selectLength(e.nativeEvent.layoutMeasurement);var contentLength=_this._selectLength(e.nativeEvent.contentSize);var offset=_this._selectOffset(e.nativeEvent.contentOffset);var dOffset=offset-_this._scrollMetrics.offset;if(_this._isNestedWithSameOrientation()){if(_this._scrollMetrics.contentLength===0){return;}var _this$_convertParentS=_this._convertParentScrollMetrics({visibleLength:visibleLength,offset:offset});visibleLength=_this$_convertParentS.visibleLength;contentLength=_this$_convertParentS.contentLength;offset=_this$_convertParentS.offset;dOffset=_this$_convertParentS.dOffset;}var dt=_this._scrollMetrics.timestamp?Math.max(1,timestamp-_this._scrollMetrics.timestamp):1;var velocity=dOffset/dt;if(dt>500&&_this._scrollMetrics.dt>500&&contentLength>5*visibleLength&&!_this._hasWarned.perf){infoLog('VirtualizedList: You have a large list that is slow to update - make sure your '+'renderItem function renders components that follow React performance best practices '+'like PureComponent, shouldComponentUpdate, etc.',{dt:dt,prevDt:_this._scrollMetrics.dt,contentLength:contentLength});_this._hasWarned.perf=true;}_this._scrollMetrics={contentLength:contentLength,dt:dt,dOffset:dOffset,offset:offset,timestamp:timestamp,velocity:velocity,visibleLength:visibleLength};_this._updateViewableItems(_this.props.data);if(!_this.props){return;}_this._maybeCallOnEndReached();if(velocity!==0){_this._fillRateHelper.activate();}_this._computeBlankness();_this._scheduleCellsToRenderUpdate();};_this._onScrollBeginDrag=function(e){_this._nestedChildLists.forEach(function(childList){childList.ref&&childList.ref._onScrollBeginDrag(e);});_this._viewabilityTuples.forEach(function(tuple){tuple.viewabilityHelper.recordInteraction();});_this._hasInteracted=true;_this.props.onScrollBeginDrag&&_this.props.onScrollBeginDrag(e);};_this._onScrollEndDrag=function(e){var velocity=e.nativeEvent.velocity;if(velocity){_this._scrollMetrics.velocity=_this._selectOffset(velocity);}_this._computeBlankness();_this.props.onScrollEndDrag&&_this.props.onScrollEndDrag(e);};_this._onMomentumScrollEnd=function(e){_this._scrollMetrics.velocity=0;_this._computeBlankness();_this.props.onMomentumScrollEnd&&_this.props.onMomentumScrollEnd(e);};_this._updateCellsToRender=function(){var _this$props3=_this.props,data=_this$props3.data,getItemCount=_this$props3.getItemCount,onEndReachedThreshold=_this$props3.onEndReachedThreshold;var isVirtualizationDisabled=_this._isVirtualizationDisabled();_this._updateViewableItems(data);if(!data){return;}_this.setState(function(state){var newState;if(!isVirtualizationDisabled){if(_this._scrollMetrics.visibleLength){if(!_this.props.initialScrollIndex||_this._scrollMetrics.offset){newState=computeWindowedRenderLimits(_this.props,state,_this._getFrameMetricsApprox,_this._scrollMetrics);}}}else{var _this$_scrollMetrics=_this._scrollMetrics,contentLength=_this$_scrollMetrics.contentLength,offset=_this$_scrollMetrics.offset,visibleLength=_this$_scrollMetrics.visibleLength;var distanceFromEnd=contentLength-visibleLength-offset;var renderAhead=distanceFromEnd<onEndReachedThreshold*visibleLength?_this.props.maxToRenderPerBatch:0;newState={first:0,last:Math.min(state.last+renderAhead,getItemCount(data)-1)};}if(newState&&_this._nestedChildLists.size>0){var newFirst=newState.first;var newLast=newState.last;for(var ii=newFirst;ii<=newLast;ii++){var cellKeyForIndex=_this._indicesToKeys.get(ii);var childListKeys=cellKeyForIndex&&_this._cellKeysToChildListKeys.get(cellKeyForIndex);if(!childListKeys){continue;}var someChildHasMore=false;for(var _iterator=childListKeys,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var childKey=_ref;var childList=_this._nestedChildLists.get(childKey);if(childList&&childList.ref&&childList.ref.hasMore()){someChildHasMore=true;break;}}if(someChildHasMore){newState.last=ii;break;}}}return newState;});};_this._createViewToken=function(index,isViewable){var _this$props4=_this.props,data=_this$props4.data,getItem=_this$props4.getItem,keyExtractor=_this$props4.keyExtractor;var item=getItem(data,index);return{index:index,item:item,key:keyExtractor(item,index),isViewable:isViewable};};_this._getFrameMetricsApprox=function(index){var frame=_this._getFrameMetrics(index);if(frame&&frame.index===index){return frame;}else{var getItemLayout=_this.props.getItemLayout;invariant(!getItemLayout,'Should not have to estimate frames when a measurement metrics function is provided');return{length:_this._averageCellLength,offset:_this._averageCellLength*index};}};_this._getFrameMetrics=function(index){var _this$props5=_this.props,data=_this$props5.data,getItem=_this$props5.getItem,getItemCount=_this$props5.getItemCount,getItemLayout=_this$props5.getItemLayout,keyExtractor=_this$props5.keyExtractor;invariant(getItemCount(data)>index,'Tried to get frame for out of range index '+index);var item=getItem(data,index);var frame=item&&_this._frames[keyExtractor(item,index)];if(!frame||frame.index!==index){if(getItemLayout){frame=getItemLayout(data,index);if(__DEV__){var frameType=PropTypes.shape({length:PropTypes.number.isRequired,offset:PropTypes.number.isRequired,index:PropTypes.number.isRequired}).isRequired;PropTypes.checkPropTypes({frame:frameType},{frame:frame},'frame','VirtualizedList.getItemLayout');}}}return frame;};invariant(!_props.onScroll||!_props.onScroll.__isNative,'Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent '+'to support native onScroll events with useNativeDriver');invariant(_props.windowSize>0,'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.');_this._fillRateHelper=new FillRateHelper(_this._getFrameMetrics);_this._updateCellsToRenderBatcher=new Batchinator(_this._updateCellsToRender,_this.props.updateCellsBatchingPeriod);if(_this.props.viewabilityConfigCallbackPairs){_this._viewabilityTuples=_this.props.viewabilityConfigCallbackPairs.map(function(pair){return{viewabilityHelper:new ViewabilityHelper(pair.viewabilityConfig),onViewableItemsChanged:pair.onViewableItemsChanged};});}else if(_this.props.onViewableItemsChanged){_this._viewabilityTuples.push({viewabilityHelper:new ViewabilityHelper(_this.props.viewabilityConfig),onViewableItemsChanged:_this.props.onViewableItemsChanged});}var initialState={first:_this.props.initialScrollIndex||0,last:Math.min(_this.props.getItemCount(_this.props.data),(_this.props.initialScrollIndex||0)+_this.props.initialNumToRender)-1};if(_this._isNestedWithSameOrientation()){var storedState=_this.context.virtualizedList.getNestedChildState(_this.props.listKey||_this._getCellKey());if(storedState){initialState=storedState;_this.state=storedState;_this._frames=storedState.frames;}}_this.state=initialState;return _this;}_proto.componentDidMount=function componentDidMount(){if(this._isNestedWithSameOrientation()){this.context.virtualizedList.registerAsNestedChild({cellKey:this._getCellKey(),key:this.props.listKey||this._getCellKey(),ref:this});}};_proto.componentWillUnmount=function componentWillUnmount(){if(this._isNestedWithSameOrientation()){this.context.virtualizedList.unregisterAsNestedChild({key:this.props.listKey||this._getCellKey(),state:{first:this.state.first,last:this.state.last,frames:this._frames}});}this._updateViewableItems(null);this._updateCellsToRenderBatcher.dispose({abort:true});this._viewabilityTuples.forEach(function(tuple){tuple.viewabilityHelper.dispose();});this._fillRateHelper.deactivateAndFlush();};VirtualizedList.getDerivedStateFromProps=function getDerivedStateFromProps(newProps,prevState){var data=newProps.data,getItemCount=newProps.getItemCount,maxToRenderPerBatch=newProps.maxToRenderPerBatch;return{first:Math.max(0,Math.min(prevState.first,getItemCount(data)-1-maxToRenderPerBatch)),last:Math.max(0,Math.min(prevState.last,getItemCount(data)-1))};};_proto._pushCells=function _pushCells(cells,stickyHeaderIndices,stickyIndicesFromProps,first,last,inversionStyle){var _this2=this;var _this$props6=this.props,CellRendererComponent=_this$props6.CellRendererComponent,ItemSeparatorComponent=_this$props6.ItemSeparatorComponent,data=_this$props6.data,getItem=_this$props6.getItem,getItemCount=_this$props6.getItemCount,horizontal=_this$props6.horizontal,keyExtractor=_this$props6.keyExtractor;var stickyOffset=this.props.ListHeaderComponent?1:0;var end=getItemCount(data)-1;var prevCellKey;last=Math.min(end,last);var _loop=function _loop(ii){var item=getItem(data,ii);var key=keyExtractor(item,ii);_this2._indicesToKeys.set(ii,key);if(stickyIndicesFromProps.has(ii+stickyOffset)){stickyHeaderIndices.push(cells.length);}cells.push(React.createElement(CellRenderer,{CellRendererComponent:CellRendererComponent,ItemSeparatorComponent:ii<end?ItemSeparatorComponent:undefined,cellKey:key,fillRateHelper:_this2._fillRateHelper,horizontal:horizontal,index:ii,inversionStyle:inversionStyle,item:item,key:key,prevCellKey:prevCellKey,onUpdateSeparators:_this2._onUpdateSeparators,onLayout:function onLayout(e){return _this2._onCellLayout(e,key,ii);},onUnmount:_this2._onCellUnmount,parentProps:_this2.props,ref:function ref(_ref2){_this2._cellRefs[key]=_ref2;}}));prevCellKey=key;};for(var ii=first;ii<=last;ii++){_loop(ii);}};_proto._isVirtualizationDisabled=function _isVirtualizationDisabled(){return this.props.disableVirtualization||false;};_proto._isNestedWithSameOrientation=function _isNestedWithSameOrientation(){var nestedContext=this.context.virtualizedList;return!!(nestedContext&&!!nestedContext.horizontal===!!this.props.horizontal);};_proto.render=function render(){var _this3=this;if(__DEV__){var flatStyles=flattenStyle(this.props.contentContainerStyle);warning(flatStyles==null||flatStyles.flexWrap!=='wrap','`flexWrap: `wrap`` is not supported with the `VirtualizedList` components.'+'Consider using `numColumns` with `FlatList` instead.');}var _this$props7=this.props,ListEmptyComponent=_this$props7.ListEmptyComponent,ListFooterComponent=_this$props7.ListFooterComponent,ListHeaderComponent=_this$props7.ListHeaderComponent;var _this$props8=this.props,data=_this$props8.data,horizontal=_this$props8.horizontal;var isVirtualizationDisabled=this._isVirtualizationDisabled();var inversionStyle=this.props.inverted?this.props.horizontal?styles.horizontallyInverted:styles.verticallyInverted:null;var cells=[];var stickyIndicesFromProps=new Set(this.props.stickyHeaderIndices);var stickyHeaderIndices=[];if(ListHeaderComponent){if(stickyIndicesFromProps.has(0)){stickyHeaderIndices.push(0);}var element=React.isValidElement(ListHeaderComponent)?ListHeaderComponent:React.createElement(ListHeaderComponent,null);cells.push(React.createElement(VirtualizedCellWrapper,{cellKey:this._getCellKey()+'-header',key:\"$header\"},React.createElement(View,{onLayout:this._onLayoutHeader,style:StyleSheet.compose(inversionStyle,this.props.ListHeaderComponentStyle)},element)));}var itemCount=this.props.getItemCount(data);if(itemCount>0){_usedIndexForKey=false;_keylessItemComponentName='';var spacerKey=!horizontal?'height':'width';var lastInitialIndex=this.props.initialScrollIndex?-1:this.props.initialNumToRender-1;var _this$state=this.state,first=_this$state.first,last=_this$state.last;this._pushCells(cells,stickyHeaderIndices,stickyIndicesFromProps,0,lastInitialIndex,inversionStyle);var firstAfterInitial=Math.max(lastInitialIndex+1,first);if(!isVirtualizationDisabled&&first>lastInitialIndex+1){var insertedStickySpacer=false;if(stickyIndicesFromProps.size>0){var stickyOffset=ListHeaderComponent?1:0;for(var ii=firstAfterInitial-1;ii>lastInitialIndex;ii--){if(stickyIndicesFromProps.has(ii+stickyOffset)){var _ref3,_ref4;var initBlock=this._getFrameMetricsApprox(lastInitialIndex);var stickyBlock=this._getFrameMetricsApprox(ii);var leadSpace=stickyBlock.offset-initBlock.offset-(this.props.initialScrollIndex?0:initBlock.length);cells.push(React.createElement(View,{key:\"$sticky_lead\",style:(_ref3={},_ref3[spacerKey]=leadSpace,_ref3)}));this._pushCells(cells,stickyHeaderIndices,stickyIndicesFromProps,ii,ii,inversionStyle);var trailSpace=this._getFrameMetricsApprox(first).offset-(stickyBlock.offset+stickyBlock.length);cells.push(React.createElement(View,{key:\"$sticky_trail\",style:(_ref4={},_ref4[spacerKey]=trailSpace,_ref4)}));insertedStickySpacer=true;break;}}}if(!insertedStickySpacer){var _ref5;var _initBlock=this._getFrameMetricsApprox(lastInitialIndex);var firstSpace=this._getFrameMetricsApprox(first).offset-(_initBlock.offset+_initBlock.length);cells.push(React.createElement(View,{key:\"$lead_spacer\",style:(_ref5={},_ref5[spacerKey]=firstSpace,_ref5)}));}}this._pushCells(cells,stickyHeaderIndices,stickyIndicesFromProps,firstAfterInitial,last,inversionStyle);if(!this._hasWarned.keys&&_usedIndexForKey){console.warn('VirtualizedList: missing keys for items, make sure to specify a key or id property on each '+'item or provide a custom keyExtractor.',_keylessItemComponentName);this._hasWarned.keys=true;}if(!isVirtualizationDisabled&&last<itemCount-1){var _ref6;var lastFrame=this._getFrameMetricsApprox(last);var end=this.props.getItemLayout?itemCount-1:Math.min(itemCount-1,this._highestMeasuredFrameIndex);var endFrame=this._getFrameMetricsApprox(end);var tailSpacerLength=endFrame.offset+endFrame.length-(lastFrame.offset+lastFrame.length);cells.push(React.createElement(View,{key:\"$tail_spacer\",style:(_ref6={},_ref6[spacerKey]=tailSpacerLength,_ref6)}));}}else if(ListEmptyComponent){var _element=React.isValidElement(ListEmptyComponent)?ListEmptyComponent:React.createElement(ListEmptyComponent,null);cells.push(React.cloneElement(_element,{key:'$empty',onLayout:function onLayout(event){_this3._onLayoutEmpty(event);if(_element.props.onLayout){_element.props.onLayout(event);}},style:StyleSheet.compose(inversionStyle,_element.props.style)}));}if(ListFooterComponent){var _element2=React.isValidElement(ListFooterComponent)?ListFooterComponent:React.createElement(ListFooterComponent,null);cells.push(React.createElement(VirtualizedCellWrapper,{cellKey:this._getCellKey()+'-footer',key:\"$footer\"},React.createElement(View,{onLayout:this._onLayoutFooter,style:StyleSheet.compose(inversionStyle,this.props.ListFooterComponentStyle)},_element2)));}var scrollProps=_objectSpread({},this.props,{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:this.props.scrollEventThrottle,invertStickyHeaders:this.props.invertStickyHeaders!==undefined?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:stickyHeaderIndices});if(inversionStyle){scrollProps.style=[inversionStyle,this.props.style];}this._hasMore=this.state.last<this.props.getItemCount(this.props.data)-1;var ret=React.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(scrollProps),{ref:this._captureScrollRef},cells);if(this.props.debug){return React.createElement(View,{style:styles.debug},ret,this._renderDebugOverlay());}else{return ret;}};_proto.componentDidUpdate=function componentDidUpdate(prevProps){var _this$props9=this.props,data=_this$props9.data,extraData=_this$props9.extraData;if(data!==prevProps.data||extraData!==prevProps.extraData){this._hasDataChangedSinceEndReached=true;this._viewabilityTuples.forEach(function(tuple){tuple.viewabilityHelper.resetViewableIndices();});}var hiPriInProgress=this._hiPriInProgress;this._scheduleCellsToRenderUpdate();if(hiPriInProgress){this._hiPriInProgress=false;}};_proto._computeBlankness=function _computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state,this._scrollMetrics);};_proto._onCellLayout=function _onCellLayout(e,cellKey,index){var layout=e.nativeEvent.layout;var next={offset:this._selectOffset(layout),length:this._selectLength(layout),index:index,inLayout:true};var curr=this._frames[cellKey];if(!curr||next.offset!==curr.offset||next.length!==curr.length||index!==curr.index){this._totalCellLength+=next.length-(curr?curr.length:0);this._totalCellsMeasured+=curr?0:1;this._averageCellLength=this._totalCellLength/this._totalCellsMeasured;this._frames[cellKey]=next;this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,index);this._scheduleCellsToRenderUpdate();}else{this._frames[cellKey].inLayout=true;}var childListKeys=this._cellKeysToChildListKeys.get(cellKey);if(childListKeys){for(var _iterator2=childListKeys,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref7;if(_isArray2){if(_i2>=_iterator2.length)break;_ref7=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref7=_i2.value;}var childKey=_ref7;var childList=this._nestedChildLists.get(childKey);childList&&childList.ref&&childList.ref.measureLayoutRelativeToContainingList();}}this._computeBlankness();this._updateViewableItems(this.props.data);};_proto.measureLayoutRelativeToContainingList=function measureLayoutRelativeToContainingList(){var _this4=this;try{if(!this._scrollRef){return;}this._scrollRef.measureLayout(this.context.virtualizedList.getOutermostParentListRef().getScrollRef().getNativeScrollRef(),function(x,y,width,height){_this4._offsetFromParentVirtualizedList=_this4._selectOffset({x:x,y:y});_this4._scrollMetrics.contentLength=_this4._selectLength({width:width,height:height});var scrollMetrics=_this4._convertParentScrollMetrics(_this4.context.virtualizedList.getScrollMetrics());_this4._scrollMetrics.visibleLength=scrollMetrics.visibleLength;_this4._scrollMetrics.offset=scrollMetrics.offset;},function(error){console.warn(\"VirtualizedList: Encountered an error while measuring a list's\"+' offset from its containing VirtualizedList.');});}catch(error){console.warn('measureLayoutRelativeToContainingList threw an error',error.stack);}};_proto._renderDebugOverlay=function _renderDebugOverlay(){var normalize=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1);var framesInLayout=[];var itemCount=this.props.getItemCount(this.props.data);for(var ii=0;ii<itemCount;ii++){var frame=this._getFrameMetricsApprox(ii);if(frame.inLayout){framesInLayout.push(frame);}}var windowTop=this._getFrameMetricsApprox(this.state.first).offset;var frameLast=this._getFrameMetricsApprox(this.state.last);var windowLen=frameLast.offset+frameLast.length-windowTop;var visTop=this._scrollMetrics.offset;var visLen=this._scrollMetrics.visibleLength;return React.createElement(View,{style:[styles.debugOverlayBase,styles.debugOverlay]},framesInLayout.map(function(f,ii){return React.createElement(View,{key:'f'+ii,style:[styles.debugOverlayBase,styles.debugOverlayFrame,{top:f.offset*normalize,height:f.length*normalize}]});}),React.createElement(View,{style:[styles.debugOverlayBase,styles.debugOverlayFrameLast,{top:windowTop*normalize,height:windowLen*normalize}]}),React.createElement(View,{style:[styles.debugOverlayBase,styles.debugOverlayFrameVis,{top:visTop*normalize,height:visLen*normalize}]}));};_proto._selectLength=function _selectLength(metrics){return!this.props.horizontal?metrics.height:metrics.width;};_proto._selectOffset=function _selectOffset(metrics){return!this.props.horizontal?metrics.y:metrics.x;};_proto._maybeCallOnEndReached=function _maybeCallOnEndReached(){var _this$props10=this.props,data=_this$props10.data,getItemCount=_this$props10.getItemCount,onEndReached=_this$props10.onEndReached,onEndReachedThreshold=_this$props10.onEndReachedThreshold;var _this$_scrollMetrics2=this._scrollMetrics,contentLength=_this$_scrollMetrics2.contentLength,visibleLength=_this$_scrollMetrics2.visibleLength,offset=_this$_scrollMetrics2.offset;var distanceFromEnd=contentLength-visibleLength-offset;if(onEndReached&&this.state.last===getItemCount(data)-1&&distanceFromEnd<onEndReachedThreshold*visibleLength&&(this._hasDataChangedSinceEndReached||this._scrollMetrics.contentLength!==this._sentEndForContentLength)){this._hasDataChangedSinceEndReached=false;this._sentEndForContentLength=this._scrollMetrics.contentLength;onEndReached({distanceFromEnd:distanceFromEnd});}};_proto._scheduleCellsToRenderUpdate=function _scheduleCellsToRenderUpdate(){var _this$state2=this.state,first=_this$state2.first,last=_this$state2.last;var _this$_scrollMetrics3=this._scrollMetrics,offset=_this$_scrollMetrics3.offset,visibleLength=_this$_scrollMetrics3.visibleLength,velocity=_this$_scrollMetrics3.velocity;var itemCount=this.props.getItemCount(this.props.data);var hiPri=false;var scrollingThreshold=this.props.onEndReachedThreshold*visibleLength/2;if(first>0){var distTop=offset-this._getFrameMetricsApprox(first).offset;hiPri=hiPri||distTop<0||velocity<-2&&distTop<scrollingThreshold;}if(last<itemCount-1){var distBottom=this._getFrameMetricsApprox(last).offset-(offset+visibleLength);hiPri=hiPri||distBottom<0||velocity>2&&distBottom<scrollingThreshold;}if(hiPri&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=true;this._updateCellsToRenderBatcher.dispose({abort:true});this._updateCellsToRender();return;}else{this._updateCellsToRenderBatcher.schedule();}};_proto._updateViewableItems=function _updateViewableItems(data){var _this5=this;var getItemCount=this.props.getItemCount;this._viewabilityTuples.forEach(function(tuple){tuple.viewabilityHelper.onUpdate(getItemCount(data),_this5._scrollMetrics.offset,_this5._scrollMetrics.visibleLength,_this5._getFrameMetrics,_this5._createViewToken,tuple.onViewableItemsChanged,_this5.state);});};return VirtualizedList;}(React.PureComponent);VirtualizedList.defaultProps={disableVirtualization:false,horizontal:false,initialNumToRender:10,keyExtractor:function keyExtractor(item,index){if(item.key!=null){return item.key;}if(item.id!=null){return item.id;}_usedIndexForKey=true;if(item.type&&item.type.displayName){_keylessItemComponentName=item.type.displayName;}return String(index);},maxToRenderPerBatch:10,onEndReachedThreshold:2,scrollEventThrottle:50,updateCellsBatchingPeriod:50,windowSize:21};VirtualizedList.contextTypes={virtualizedCell:PropTypes.shape({cellKey:PropTypes.string}),virtualizedList:PropTypes.shape({getScrollMetrics:PropTypes.func,horizontal:PropTypes.bool,getOutermostParentListRef:PropTypes.func,getNestedChildState:PropTypes.func,registerAsNestedChild:PropTypes.func,unregisterAsNestedChild:PropTypes.func})};VirtualizedList.childContextTypes={virtualizedList:PropTypes.shape({getScrollMetrics:PropTypes.func,horizontal:PropTypes.bool,getOutermostParentListRef:PropTypes.func,getNestedChildState:PropTypes.func,registerAsNestedChild:PropTypes.func,unregisterAsNestedChild:PropTypes.func})};var CellRenderer=function(_React$Component){_inheritsLoose(CellRenderer,_React$Component);function CellRenderer(){var _this6;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this6=_React$Component.call.apply(_React$Component,[this].concat(args))||this;_this6.state={separatorProps:{highlighted:false,leadingItem:_this6.props.item}};_this6._separators={highlight:function highlight(){var _this6$props=_this6.props,cellKey=_this6$props.cellKey,prevCellKey=_this6$props.prevCellKey;_this6.props.onUpdateSeparators([cellKey,prevCellKey],{highlighted:true});},unhighlight:function unhighlight(){var _this6$props2=_this6.props,cellKey=_this6$props2.cellKey,prevCellKey=_this6$props2.prevCellKey;_this6.props.onUpdateSeparators([cellKey,prevCellKey],{highlighted:false});},updateProps:function updateProps(select,newProps){var _this6$props3=_this6.props,cellKey=_this6$props3.cellKey,prevCellKey=_this6$props3.prevCellKey;_this6.props.onUpdateSeparators([select==='leading'?prevCellKey:cellKey],newProps);}};return _this6;}var _proto2=CellRenderer.prototype;_proto2.getChildContext=function getChildContext(){return{virtualizedCell:{cellKey:this.props.cellKey}};};_proto2.updateSeparatorProps=function updateSeparatorProps(newProps){this.setState(function(state){return{separatorProps:_objectSpread({},state.separatorProps,{},newProps)};});};_proto2.componentWillUnmount=function componentWillUnmount(){this.props.onUnmount(this.props.cellKey);};_proto2.render=function render(){var _this$props11=this.props,CellRendererComponent=_this$props11.CellRendererComponent,ItemSeparatorComponent=_this$props11.ItemSeparatorComponent,fillRateHelper=_this$props11.fillRateHelper,horizontal=_this$props11.horizontal,item=_this$props11.item,index=_this$props11.index,inversionStyle=_this$props11.inversionStyle,parentProps=_this$props11.parentProps;var renderItem=parentProps.renderItem,getItemLayout=parentProps.getItemLayout;invariant(renderItem,'no renderItem!');var element=renderItem({item:item,index:index,separators:this._separators});var onLayout=getItemLayout&&!parentProps.debug&&!fillRateHelper.enabled()?undefined:this.props.onLayout;var itemSeparator=ItemSeparatorComponent&&React.createElement(ItemSeparatorComponent,this.state.separatorProps);var cellStyle=inversionStyle?horizontal?[styles.rowReverse,inversionStyle]:[styles.columnReverse,inversionStyle]:horizontal?[styles.row,inversionStyle]:inversionStyle;if(!CellRendererComponent){return React.createElement(View,{style:cellStyle,onLayout:onLayout},element,itemSeparator);}return React.createElement(CellRendererComponent,_extends({},this.props,{style:cellStyle,onLayout:onLayout}),element,itemSeparator);};return CellRenderer;}(React.Component);CellRenderer.childContextTypes={virtualizedCell:PropTypes.shape({cellKey:PropTypes.string})};var VirtualizedCellWrapper=function(_React$Component2){_inheritsLoose(VirtualizedCellWrapper,_React$Component2);function VirtualizedCellWrapper(){return _React$Component2.apply(this,arguments)||this;}var _proto3=VirtualizedCellWrapper.prototype;_proto3.getChildContext=function getChildContext(){return{virtualizedCell:{cellKey:this.props.cellKey}};};_proto3.render=function render(){return this.props.children;};return VirtualizedCellWrapper;}(React.Component);VirtualizedCellWrapper.childContextTypes={virtualizedCell:PropTypes.shape({cellKey:PropTypes.string})};var styles=StyleSheet.create({verticallyInverted:{transform:[{scaleY:-1}]},horizontallyInverted:{transform:[{scaleX:-1}]},row:{flexDirection:'row'},rowReverse:{flexDirection:'row-reverse'},columnReverse:{flexDirection:'column-reverse'},debug:{flex:1},debugOverlayBase:{position:'absolute',top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:'blue',borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:'orange'},debugOverlayFrameLast:{left:0,borderColor:'green',borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:'red',borderWidth:2}});export default VirtualizedList;","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","Batchinator","FillRateHelper","PropTypes","React","RefreshControl","ScrollView","StyleSheet","UIManager","View","ViewabilityHelper","findNodeHandle","flattenStyle","flatten","infoLog","invariant","warning","computeWindowedRenderLimits","__DEV__","process","env","NODE_ENV","_usedIndexForKey","_keylessItemComponentName","VirtualizedList","_React$PureComponent","_proto","scrollToEnd","params","animated","veryLast","props","getItemCount","data","frame","_getFrameMetricsApprox","offset","Math","max","_footerLength","_scrollMetrics","visibleLength","_scrollRef","scrollTo","horizontal","x","y","scrollToIndex","_this$props","getItemLayout","onScrollToIndexFailed","index","viewOffset","viewPosition","_highestMeasuredFrameIndex","averageItemLength","_averageCellLength","highestMeasuredFrameIndex","scrollToItem","item","_this$props2","getItem","itemCount","_index","scrollToOffset","recordInteraction","_nestedChildLists","childList","ref","_viewabilityTuples","t","viewabilityHelper","_updateViewableItems","flashScrollIndicators","getScrollResponder","getScrollableNode","getScrollRef","setNativeProps","getChildContext","virtualizedList","getScrollMetrics","_getScrollMetrics","getOutermostParentListRef","_getOutermostParentListRef","getNestedChildState","_getNestedChildState","registerAsNestedChild","_registerAsNestedChild","unregisterAsNestedChild","_unregisterAsNestedChild","_getCellKey","context","virtualizedCell","cellKey","hasMore","_hasMore","_props","_this","_isNestedWithSameOrientation","existingChildData","get","state","childListsInCell","_cellKeysToChildListKeys","Set","add","set","console","error","_hasInteracted","_onUpdateSeparators","newProps","_cellRefs","updateSeparatorProps","Map","_frames","_hasDataChangedSinceEndReached","_hasDoneInitialScroll","_hasWarned","_headerLength","_hiPriInProgress","_indicesToKeys","_offsetFromParentVirtualizedList","_prevParentOffset","contentLength","dOffset","dt","timestamp","velocity","_sentEndForContentLength","_totalCellLength","_totalCellsMeasured","_captureScrollRef","_defaultRenderScrollComponent","onRefresh","createElement","refreshing","JSON","stringify","refreshControl","progressViewOffset","_onCellUnmount","curr","inLayout","_onLayout","e","measureLayoutRelativeToContainingList","_selectLength","nativeEvent","layout","onLayout","_scheduleCellsToRenderUpdate","_maybeCallOnEndReached","_onLayoutEmpty","_onLayoutFooter","_onLayoutHeader","_onContentSizeChange","width","height","initialScrollIndex","onContentSizeChange","_convertParentScrollMetrics","metrics","_onScroll","onScroll","timeStamp","layoutMeasurement","contentSize","_selectOffset","contentOffset","_this$_convertParentS","perf","prevDt","_fillRateHelper","activate","_computeBlankness","_onScrollBeginDrag","tuple","onScrollBeginDrag","_onScrollEndDrag","onScrollEndDrag","_onMomentumScrollEnd","onMomentumScrollEnd","_updateCellsToRender","_this$props3","onEndReachedThreshold","isVirtualizationDisabled","_isVirtualizationDisabled","setState","newState","_this$_scrollMetrics","distanceFromEnd","renderAhead","maxToRenderPerBatch","first","last","min","size","newFirst","newLast","ii","cellKeyForIndex","childListKeys","someChildHasMore","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref","next","done","childKey","_createViewToken","isViewable","_this$props4","keyExtractor","_getFrameMetrics","_this$props5","frameType","shape","number","isRequired","checkPropTypes","__isNative","windowSize","_updateCellsToRenderBatcher","updateCellsBatchingPeriod","viewabilityConfigCallbackPairs","map","pair","viewabilityConfig","onViewableItemsChanged","initialState","initialNumToRender","storedState","listKey","frames","componentDidMount","componentWillUnmount","dispose","abort","deactivateAndFlush","getDerivedStateFromProps","prevState","_pushCells","cells","stickyHeaderIndices","stickyIndicesFromProps","inversionStyle","_this2","_this$props6","CellRendererComponent","ItemSeparatorComponent","stickyOffset","ListHeaderComponent","end","prevCellKey","_loop","has","CellRenderer","undefined","fillRateHelper","onUpdateSeparators","_onCellLayout","onUnmount","parentProps","_ref2","disableVirtualization","nestedContext","render","_this3","flatStyles","contentContainerStyle","flexWrap","_this$props7","ListEmptyComponent","ListFooterComponent","_this$props8","inverted","styles","horizontallyInverted","verticallyInverted","element","isValidElement","VirtualizedCellWrapper","style","compose","ListHeaderComponentStyle","spacerKey","lastInitialIndex","_this$state","firstAfterInitial","insertedStickySpacer","_ref3","_ref4","initBlock","stickyBlock","leadSpace","trailSpace","_ref5","_initBlock","firstSpace","warn","_ref6","lastFrame","endFrame","tailSpacerLength","_element","cloneElement","event","_element2","ListFooterComponentStyle","scrollProps","scrollEventThrottle","invertStickyHeaders","ret","renderScrollComponent","debug","_renderDebugOverlay","componentDidUpdate","prevProps","_this$props9","extraData","resetViewableIndices","hiPriInProgress","computeBlankness","_iterator2","_isArray2","_i2","_ref7","_this4","measureLayout","getNativeScrollRef","scrollMetrics","stack","normalize","framesInLayout","windowTop","frameLast","windowLen","visTop","visLen","debugOverlayBase","debugOverlay","f","debugOverlayFrame","top","debugOverlayFrameLast","debugOverlayFrameVis","_this$props10","onEndReached","_this$_scrollMetrics2","_this$state2","_this$_scrollMetrics3","hiPri","scrollingThreshold","distTop","distBottom","schedule","_this5","onUpdate","PureComponent","defaultProps","id","type","displayName","String","contextTypes","string","func","bool","childContextTypes","_React$Component","_this6","_len","args","_key","concat","separatorProps","highlighted","leadingItem","_separators","highlight","_this6$props","unhighlight","_this6$props2","updateProps","select","_this6$props3","_proto2","_this$props11","renderItem","separators","enabled","itemSeparator","cellStyle","rowReverse","columnReverse","row","Component","_React$Component2","_proto3","children","transform","scaleY","scaleX","flexDirection","flex","position","right","bottom","borderColor","borderWidth","left","backgroundColor"],"sources":["/Users/michaeladmin/Documents/GitHub/vidnation/node_modules/react-native-web/dist/vendor/react-native/VirtualizedList/index.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n * @format\n */\n'use strict';\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport Batchinator from '../Batchinator';\nimport FillRateHelper from '../FillRateHelper';\nimport PropTypes from 'prop-types';\nimport * as React from 'react';\nimport RefreshControl from '../../../exports/RefreshControl';\nimport ScrollView from '../../../exports/ScrollView';\nimport StyleSheet from '../../../exports/StyleSheet';\nimport UIManager from '../../../exports/UIManager';\nimport View from '../../../exports/View';\nimport ViewabilityHelper from '../ViewabilityHelper';\nimport findNodeHandle from '../../../exports/findNodeHandle';\nvar flattenStyle = StyleSheet.flatten;\nimport infoLog from '../infoLog';\nimport invariant from 'fbjs/lib/invariant';\nimport warning from 'fbjs/lib/warning';\nimport { computeWindowedRenderLimits } from '../VirtualizeUtils';\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar _usedIndexForKey = false;\nvar _keylessItemComponentName = '';\n\n/**\n * Base implementation for the more convenient [`<FlatList>`](/react-native/docs/flatlist.html)\n * and [`<SectionList>`](/react-native/docs/sectionlist.html) components, which are also better\n * documented. In general, this should only really be used if you need more flexibility than\n * `FlatList` provides, e.g. for use with immutable data instead of plain arrays.\n *\n * Virtualization massively improves memory consumption and performance of large lists by\n * maintaining a finite render window of active items and replacing all items outside of the render\n * window with appropriately sized blank space. The window adapts to scrolling behavior, and items\n * are rendered incrementally with low-pri (after any running interactions) if they are far from the\n * visible area, or with hi-pri otherwise to minimize the potential of seeing blank space.\n *\n * Some caveats:\n *\n * - Internal state is not preserved when content scrolls out of the render window. Make sure all\n *   your data is captured in the item data or external stores like Flux, Redux, or Relay.\n * - This is a `PureComponent` which means that it will not re-render if `props` remain shallow-\n *   equal. Make sure that everything your `renderItem` function depends on is passed as a prop\n *   (e.g. `extraData`) that is not `===` after updates, otherwise your UI may not update on\n *   changes. This includes the `data` prop and parent component state.\n * - In order to constrain memory and enable smooth scrolling, content is rendered asynchronously\n *   offscreen. This means it's possible to scroll faster than the fill rate ands momentarily see\n *   blank content. This is a tradeoff that can be adjusted to suit the needs of each application,\n *   and we are working on improving it behind the scenes.\n * - By default, the list looks for a `key` or `id` prop on each item and uses that for the React key.\n *   Alternatively, you can provide a custom `keyExtractor` prop.\n *\n */\nvar VirtualizedList =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inheritsLoose(VirtualizedList, _React$PureComponent);\n\n  var _proto = VirtualizedList.prototype;\n\n  // scrollToEnd may be janky without getItemLayout prop\n  _proto.scrollToEnd = function scrollToEnd(params) {\n    var animated = params ? params.animated : true;\n    var veryLast = this.props.getItemCount(this.props.data) - 1;\n\n    var frame = this._getFrameMetricsApprox(veryLast);\n\n    var offset = Math.max(0, frame.offset + frame.length + this._footerLength - this._scrollMetrics.visibleLength);\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This comment\n     * suppresses an error when upgrading Flow's support for React. To see the\n     * error delete this comment and run Flow. */\n\n    this._scrollRef.scrollTo(this.props.horizontal ? {\n      x: offset,\n      animated: animated\n    } : {\n      y: offset,\n      animated: animated\n    });\n  } // scrollToIndex may be janky without getItemLayout prop\n  ;\n\n  _proto.scrollToIndex = function scrollToIndex(params) {\n    var _this$props = this.props,\n        data = _this$props.data,\n        horizontal = _this$props.horizontal,\n        getItemCount = _this$props.getItemCount,\n        getItemLayout = _this$props.getItemLayout,\n        onScrollToIndexFailed = _this$props.onScrollToIndexFailed;\n    var animated = params.animated,\n        index = params.index,\n        viewOffset = params.viewOffset,\n        viewPosition = params.viewPosition;\n    invariant(index >= 0 && index < getItemCount(data), \"scrollToIndex out of range: \" + index + \" vs \" + (getItemCount(data) - 1));\n\n    if (!getItemLayout && index > this._highestMeasuredFrameIndex) {\n      invariant(!!onScrollToIndexFailed, 'scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, ' + 'otherwise there is no way to know the location of offscreen indices or handle failures.');\n      onScrollToIndexFailed({\n        averageItemLength: this._averageCellLength,\n        highestMeasuredFrameIndex: this._highestMeasuredFrameIndex,\n        index: index\n      });\n      return;\n    }\n\n    var frame = this._getFrameMetricsApprox(index);\n\n    var offset = Math.max(0, frame.offset - (viewPosition || 0) * (this._scrollMetrics.visibleLength - frame.length)) - (viewOffset || 0);\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This comment\n     * suppresses an error when upgrading Flow's support for React. To see the\n     * error delete this comment and run Flow. */\n\n    this._scrollRef.scrollTo(horizontal ? {\n      x: offset,\n      animated: animated\n    } : {\n      y: offset,\n      animated: animated\n    });\n  } // scrollToItem may be janky without getItemLayout prop. Required linear scan through items -\n  // use scrollToIndex instead if possible.\n  ;\n\n  _proto.scrollToItem = function scrollToItem(params) {\n    var item = params.item;\n    var _this$props2 = this.props,\n        data = _this$props2.data,\n        getItem = _this$props2.getItem,\n        getItemCount = _this$props2.getItemCount;\n    var itemCount = getItemCount(data);\n\n    for (var _index = 0; _index < itemCount; _index++) {\n      if (getItem(data, _index) === item) {\n        this.scrollToIndex(_objectSpread({}, params, {\n          index: _index\n        }));\n        break;\n      }\n    }\n  }\n  /**\n   * Scroll to a specific content pixel offset in the list.\n   *\n   * Param `offset` expects the offset to scroll to.\n   * In case of `horizontal` is true, the offset is the x-value,\n   * in any other case the offset is the y-value.\n   *\n   * Param `animated` (`true` by default) defines whether the list\n   * should do an animation while scrolling.\n   */\n  ;\n\n  _proto.scrollToOffset = function scrollToOffset(params) {\n    var animated = params.animated,\n        offset = params.offset;\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This comment\n     * suppresses an error when upgrading Flow's support for React. To see the\n     * error delete this comment and run Flow. */\n\n    this._scrollRef.scrollTo(this.props.horizontal ? {\n      x: offset,\n      animated: animated\n    } : {\n      y: offset,\n      animated: animated\n    });\n  };\n\n  _proto.recordInteraction = function recordInteraction() {\n    this._nestedChildLists.forEach(function (childList) {\n      childList.ref && childList.ref.recordInteraction();\n    });\n\n    this._viewabilityTuples.forEach(function (t) {\n      t.viewabilityHelper.recordInteraction();\n    });\n\n    this._updateViewableItems(this.props.data);\n  };\n\n  _proto.flashScrollIndicators = function flashScrollIndicators() {\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This comment\n     * suppresses an error when upgrading Flow's support for React. To see the\n     * error delete this comment and run Flow. */\n    this._scrollRef.flashScrollIndicators();\n  }\n  /**\n   * Provides a handle to the underlying scroll responder.\n   * Note that `this._scrollRef` might not be a `ScrollView`, so we\n   * need to check that it responds to `getScrollResponder` before calling it.\n   */\n  ;\n\n  _proto.getScrollResponder = function getScrollResponder() {\n    if (this._scrollRef && this._scrollRef.getScrollResponder) {\n      return this._scrollRef.getScrollResponder();\n    }\n  };\n\n  _proto.getScrollableNode = function getScrollableNode() {\n    if (this._scrollRef && this._scrollRef.getScrollableNode) {\n      return this._scrollRef.getScrollableNode();\n    } else {\n      return findNodeHandle(this._scrollRef);\n    }\n  };\n\n  _proto.getScrollRef = function getScrollRef() {\n    if (this._scrollRef && this._scrollRef.getScrollRef) {\n      return this._scrollRef.getScrollRef();\n    } else {\n      return this._scrollRef;\n    }\n  };\n\n  _proto.setNativeProps = function setNativeProps(props) {\n    if (this._scrollRef) {\n      this._scrollRef.setNativeProps(props);\n    }\n  };\n\n  _proto.getChildContext = function getChildContext() {\n    return {\n      virtualizedList: {\n        getScrollMetrics: this._getScrollMetrics,\n        horizontal: this.props.horizontal,\n        getOutermostParentListRef: this._getOutermostParentListRef,\n        getNestedChildState: this._getNestedChildState,\n        registerAsNestedChild: this._registerAsNestedChild,\n        unregisterAsNestedChild: this._unregisterAsNestedChild\n      }\n    };\n  };\n\n  _proto._getCellKey = function _getCellKey() {\n    return this.context.virtualizedCell && this.context.virtualizedCell.cellKey || 'rootList';\n  };\n\n  _proto.hasMore = function hasMore() {\n    return this._hasMore;\n  };\n\n  function VirtualizedList(_props, context) {\n    var _this;\n\n    _this = _React$PureComponent.call(this, _props, context) || this;\n\n    _this._getScrollMetrics = function () {\n      return _this._scrollMetrics;\n    };\n\n    _this._getOutermostParentListRef = function () {\n      if (_this._isNestedWithSameOrientation()) {\n        return _this.context.virtualizedList.getOutermostParentListRef();\n      } else {\n        return _assertThisInitialized(_this);\n      }\n    };\n\n    _this._getNestedChildState = function (key) {\n      var existingChildData = _this._nestedChildLists.get(key);\n\n      return existingChildData && existingChildData.state;\n    };\n\n    _this._registerAsNestedChild = function (childList) {\n      // Register the mapping between this child key and the cellKey for its cell\n      var childListsInCell = _this._cellKeysToChildListKeys.get(childList.cellKey) || new Set();\n      childListsInCell.add(childList.key);\n\n      _this._cellKeysToChildListKeys.set(childList.cellKey, childListsInCell);\n\n      var existingChildData = _this._nestedChildLists.get(childList.key);\n\n      if (existingChildData && existingChildData.ref !== null) {\n        console.error('A VirtualizedList contains a cell which itself contains ' + 'more than one VirtualizedList of the same orientation as the parent ' + 'list. You must pass a unique listKey prop to each sibling list.');\n      }\n\n      _this._nestedChildLists.set(childList.key, {\n        ref: childList.ref,\n        state: null\n      });\n\n      if (_this._hasInteracted) {\n        childList.ref.recordInteraction();\n      }\n    };\n\n    _this._unregisterAsNestedChild = function (childList) {\n      _this._nestedChildLists.set(childList.key, {\n        ref: null,\n        state: childList.state\n      });\n    };\n\n    _this._onUpdateSeparators = function (keys, newProps) {\n      keys.forEach(function (key) {\n        var ref = key != null && _this._cellRefs[key];\n        ref && ref.updateSeparatorProps(newProps);\n      });\n    };\n\n    _this._averageCellLength = 0;\n    _this._cellKeysToChildListKeys = new Map();\n    _this._cellRefs = {};\n    _this._frames = {};\n    _this._footerLength = 0;\n    _this._hasDataChangedSinceEndReached = true;\n    _this._hasDoneInitialScroll = false;\n    _this._hasInteracted = false;\n    _this._hasMore = false;\n    _this._hasWarned = {};\n    _this._headerLength = 0;\n    _this._hiPriInProgress = false;\n    _this._highestMeasuredFrameIndex = 0;\n    _this._indicesToKeys = new Map();\n    _this._nestedChildLists = new Map();\n    _this._offsetFromParentVirtualizedList = 0;\n    _this._prevParentOffset = 0;\n    _this._scrollMetrics = {\n      contentLength: 0,\n      dOffset: 0,\n      dt: 10,\n      offset: 0,\n      timestamp: 0,\n      velocity: 0,\n      visibleLength: 0\n    };\n    _this._scrollRef = null;\n    _this._sentEndForContentLength = 0;\n    _this._totalCellLength = 0;\n    _this._totalCellsMeasured = 0;\n    _this._viewabilityTuples = [];\n\n    _this._captureScrollRef = function (ref) {\n      _this._scrollRef = ref;\n    };\n\n    _this._defaultRenderScrollComponent = function (props) {\n      var onRefresh = props.onRefresh;\n\n      if (_this._isNestedWithSameOrientation()) {\n        // $FlowFixMe - Typing ReactNativeComponent revealed errors\n        return React.createElement(View, props);\n      } else if (onRefresh) {\n        invariant(typeof props.refreshing === 'boolean', '`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `' + JSON.stringify(props.refreshing) + '`');\n        return (// $FlowFixMe Invalid prop usage\n          React.createElement(ScrollView, _extends({}, props, {\n            refreshControl: props.refreshControl == null ? React.createElement(RefreshControl, {\n              refreshing: props.refreshing,\n              onRefresh: onRefresh,\n              progressViewOffset: props.progressViewOffset\n            }) : props.refreshControl\n          }))\n        );\n      } else {\n        // $FlowFixMe Invalid prop usage\n        return React.createElement(ScrollView, props);\n      }\n    };\n\n    _this._onCellUnmount = function (cellKey) {\n      var curr = _this._frames[cellKey];\n\n      if (curr) {\n        _this._frames[cellKey] = _objectSpread({}, curr, {\n          inLayout: false\n        });\n      }\n    };\n\n    _this._onLayout = function (e) {\n      if (_this._isNestedWithSameOrientation()) {\n        // Need to adjust our scroll metrics to be relative to our containing\n        // VirtualizedList before we can make claims about list item viewability\n        _this.measureLayoutRelativeToContainingList();\n      } else {\n        _this._scrollMetrics.visibleLength = _this._selectLength(e.nativeEvent.layout);\n      }\n\n      _this.props.onLayout && _this.props.onLayout(e);\n\n      _this._scheduleCellsToRenderUpdate();\n\n      _this._maybeCallOnEndReached();\n    };\n\n    _this._onLayoutEmpty = function (e) {\n      _this.props.onLayout && _this.props.onLayout(e);\n    };\n\n    _this._onLayoutFooter = function (e) {\n      _this._footerLength = _this._selectLength(e.nativeEvent.layout);\n    };\n\n    _this._onLayoutHeader = function (e) {\n      _this._headerLength = _this._selectLength(e.nativeEvent.layout);\n    };\n\n    _this._onContentSizeChange = function (width, height) {\n      if (width > 0 && height > 0 && _this.props.initialScrollIndex != null && _this.props.initialScrollIndex > 0 && !_this._hasDoneInitialScroll) {\n        _this.scrollToIndex({\n          animated: false,\n          index: _this.props.initialScrollIndex\n        });\n\n        _this._hasDoneInitialScroll = true;\n      }\n\n      if (_this.props.onContentSizeChange) {\n        _this.props.onContentSizeChange(width, height);\n      }\n\n      _this._scrollMetrics.contentLength = _this._selectLength({\n        height: height,\n        width: width\n      });\n\n      _this._scheduleCellsToRenderUpdate();\n\n      _this._maybeCallOnEndReached();\n    };\n\n    _this._convertParentScrollMetrics = function (metrics) {\n      // Offset of the top of the nested list relative to the top of its parent's viewport\n      var offset = metrics.offset - _this._offsetFromParentVirtualizedList; // Child's visible length is the same as its parent's\n\n      var visibleLength = metrics.visibleLength;\n      var dOffset = offset - _this._scrollMetrics.offset;\n      var contentLength = _this._scrollMetrics.contentLength;\n      return {\n        visibleLength: visibleLength,\n        contentLength: contentLength,\n        offset: offset,\n        dOffset: dOffset\n      };\n    };\n\n    _this._onScroll = function (e) {\n      _this._nestedChildLists.forEach(function (childList) {\n        childList.ref && childList.ref._onScroll(e);\n      });\n\n      if (_this.props.onScroll) {\n        _this.props.onScroll(e);\n      }\n\n      var timestamp = e.timeStamp;\n\n      var visibleLength = _this._selectLength(e.nativeEvent.layoutMeasurement);\n\n      var contentLength = _this._selectLength(e.nativeEvent.contentSize);\n\n      var offset = _this._selectOffset(e.nativeEvent.contentOffset);\n\n      var dOffset = offset - _this._scrollMetrics.offset;\n\n      if (_this._isNestedWithSameOrientation()) {\n        if (_this._scrollMetrics.contentLength === 0) {\n          // Ignore scroll events until onLayout has been called and we\n          // know our offset from our offset from our parent\n          return;\n        }\n\n        var _this$_convertParentS = _this._convertParentScrollMetrics({\n          visibleLength: visibleLength,\n          offset: offset\n        });\n\n        visibleLength = _this$_convertParentS.visibleLength;\n        contentLength = _this$_convertParentS.contentLength;\n        offset = _this$_convertParentS.offset;\n        dOffset = _this$_convertParentS.dOffset;\n      }\n\n      var dt = _this._scrollMetrics.timestamp ? Math.max(1, timestamp - _this._scrollMetrics.timestamp) : 1;\n      var velocity = dOffset / dt;\n\n      if (dt > 500 && _this._scrollMetrics.dt > 500 && contentLength > 5 * visibleLength && !_this._hasWarned.perf) {\n        infoLog('VirtualizedList: You have a large list that is slow to update - make sure your ' + 'renderItem function renders components that follow React performance best practices ' + 'like PureComponent, shouldComponentUpdate, etc.', {\n          dt: dt,\n          prevDt: _this._scrollMetrics.dt,\n          contentLength: contentLength\n        });\n        _this._hasWarned.perf = true;\n      }\n\n      _this._scrollMetrics = {\n        contentLength: contentLength,\n        dt: dt,\n        dOffset: dOffset,\n        offset: offset,\n        timestamp: timestamp,\n        velocity: velocity,\n        visibleLength: visibleLength\n      };\n\n      _this._updateViewableItems(_this.props.data);\n\n      if (!_this.props) {\n        return;\n      }\n\n      _this._maybeCallOnEndReached();\n\n      if (velocity !== 0) {\n        _this._fillRateHelper.activate();\n      }\n\n      _this._computeBlankness();\n\n      _this._scheduleCellsToRenderUpdate();\n    };\n\n    _this._onScrollBeginDrag = function (e) {\n      _this._nestedChildLists.forEach(function (childList) {\n        childList.ref && childList.ref._onScrollBeginDrag(e);\n      });\n\n      _this._viewabilityTuples.forEach(function (tuple) {\n        tuple.viewabilityHelper.recordInteraction();\n      });\n\n      _this._hasInteracted = true;\n      _this.props.onScrollBeginDrag && _this.props.onScrollBeginDrag(e);\n    };\n\n    _this._onScrollEndDrag = function (e) {\n      var velocity = e.nativeEvent.velocity;\n\n      if (velocity) {\n        _this._scrollMetrics.velocity = _this._selectOffset(velocity);\n      }\n\n      _this._computeBlankness();\n\n      _this.props.onScrollEndDrag && _this.props.onScrollEndDrag(e);\n    };\n\n    _this._onMomentumScrollEnd = function (e) {\n      _this._scrollMetrics.velocity = 0;\n\n      _this._computeBlankness();\n\n      _this.props.onMomentumScrollEnd && _this.props.onMomentumScrollEnd(e);\n    };\n\n    _this._updateCellsToRender = function () {\n      var _this$props3 = _this.props,\n          data = _this$props3.data,\n          getItemCount = _this$props3.getItemCount,\n          onEndReachedThreshold = _this$props3.onEndReachedThreshold;\n\n      var isVirtualizationDisabled = _this._isVirtualizationDisabled();\n\n      _this._updateViewableItems(data);\n\n      if (!data) {\n        return;\n      }\n\n      _this.setState(function (state) {\n        var newState;\n\n        if (!isVirtualizationDisabled) {\n          // If we run this with bogus data, we'll force-render window {first: 0, last: 0},\n          // and wipe out the initialNumToRender rendered elements.\n          // So let's wait until the scroll view metrics have been set up. And until then,\n          // we will trust the initialNumToRender suggestion\n          if (_this._scrollMetrics.visibleLength) {\n            // If we have a non-zero initialScrollIndex and run this before we've scrolled,\n            // we'll wipe out the initialNumToRender rendered elements starting at initialScrollIndex.\n            // So let's wait until we've scrolled the view to the right place. And until then,\n            // we will trust the initialScrollIndex suggestion.\n            if (!_this.props.initialScrollIndex || _this._scrollMetrics.offset) {\n              newState = computeWindowedRenderLimits(_this.props, state, _this._getFrameMetricsApprox, _this._scrollMetrics);\n            }\n          }\n        } else {\n          var _this$_scrollMetrics = _this._scrollMetrics,\n              contentLength = _this$_scrollMetrics.contentLength,\n              offset = _this$_scrollMetrics.offset,\n              visibleLength = _this$_scrollMetrics.visibleLength;\n          var distanceFromEnd = contentLength - visibleLength - offset;\n          var renderAhead =\n          /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment suppresses\n           * an error found when Flow v0.63 was deployed. To see the error\n           * delete this comment and run Flow. */\n          distanceFromEnd < onEndReachedThreshold * visibleLength ? _this.props.maxToRenderPerBatch : 0;\n          newState = {\n            first: 0,\n            last: Math.min(state.last + renderAhead, getItemCount(data) - 1)\n          };\n        }\n\n        if (newState && _this._nestedChildLists.size > 0) {\n          var newFirst = newState.first;\n          var newLast = newState.last; // If some cell in the new state has a child list in it, we should only render\n          // up through that item, so that we give that list a chance to render.\n          // Otherwise there's churn from multiple child lists mounting and un-mounting\n          // their items.\n\n          for (var ii = newFirst; ii <= newLast; ii++) {\n            var cellKeyForIndex = _this._indicesToKeys.get(ii);\n\n            var childListKeys = cellKeyForIndex && _this._cellKeysToChildListKeys.get(cellKeyForIndex);\n\n            if (!childListKeys) {\n              continue;\n            }\n\n            var someChildHasMore = false; // For each cell, need to check whether any child list in it has more elements to render\n\n            for (var _iterator = childListKeys, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n              var _ref;\n\n              if (_isArray) {\n                if (_i >= _iterator.length) break;\n                _ref = _iterator[_i++];\n              } else {\n                _i = _iterator.next();\n                if (_i.done) break;\n                _ref = _i.value;\n              }\n\n              var childKey = _ref;\n\n              var childList = _this._nestedChildLists.get(childKey);\n\n              if (childList && childList.ref && childList.ref.hasMore()) {\n                someChildHasMore = true;\n                break;\n              }\n            }\n\n            if (someChildHasMore) {\n              newState.last = ii;\n              break;\n            }\n          }\n        }\n\n        return newState;\n      });\n    };\n\n    _this._createViewToken = function (index, isViewable) {\n      var _this$props4 = _this.props,\n          data = _this$props4.data,\n          getItem = _this$props4.getItem,\n          keyExtractor = _this$props4.keyExtractor;\n      var item = getItem(data, index);\n      return {\n        index: index,\n        item: item,\n        key: keyExtractor(item, index),\n        isViewable: isViewable\n      };\n    };\n\n    _this._getFrameMetricsApprox = function (index) {\n      var frame = _this._getFrameMetrics(index);\n\n      if (frame && frame.index === index) {\n        // check for invalid frames due to row re-ordering\n        return frame;\n      } else {\n        var getItemLayout = _this.props.getItemLayout;\n        invariant(!getItemLayout, 'Should not have to estimate frames when a measurement metrics function is provided');\n        return {\n          length: _this._averageCellLength,\n          offset: _this._averageCellLength * index\n        };\n      }\n    };\n\n    _this._getFrameMetrics = function (index) {\n      var _this$props5 = _this.props,\n          data = _this$props5.data,\n          getItem = _this$props5.getItem,\n          getItemCount = _this$props5.getItemCount,\n          getItemLayout = _this$props5.getItemLayout,\n          keyExtractor = _this$props5.keyExtractor;\n      invariant(getItemCount(data) > index, 'Tried to get frame for out of range index ' + index);\n      var item = getItem(data, index);\n\n      var frame = item && _this._frames[keyExtractor(item, index)];\n\n      if (!frame || frame.index !== index) {\n        if (getItemLayout) {\n          frame = getItemLayout(data, index);\n\n          if (__DEV__) {\n            var frameType = PropTypes.shape({\n              length: PropTypes.number.isRequired,\n              offset: PropTypes.number.isRequired,\n              index: PropTypes.number.isRequired\n            }).isRequired;\n            PropTypes.checkPropTypes({\n              frame: frameType\n            }, {\n              frame: frame\n            }, 'frame', 'VirtualizedList.getItemLayout');\n          }\n        }\n      }\n      /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment suppresses an\n       * error found when Flow v0.63 was deployed. To see the error delete this\n       * comment and run Flow. */\n\n\n      return frame;\n    };\n\n    invariant(!_props.onScroll || !_props.onScroll.__isNative, 'Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent ' + 'to support native onScroll events with useNativeDriver');\n    invariant(_props.windowSize > 0, 'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.');\n    _this._fillRateHelper = new FillRateHelper(_this._getFrameMetrics);\n    _this._updateCellsToRenderBatcher = new Batchinator(_this._updateCellsToRender, _this.props.updateCellsBatchingPeriod);\n\n    if (_this.props.viewabilityConfigCallbackPairs) {\n      _this._viewabilityTuples = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {\n        return {\n          viewabilityHelper: new ViewabilityHelper(pair.viewabilityConfig),\n          onViewableItemsChanged: pair.onViewableItemsChanged\n        };\n      });\n    } else if (_this.props.onViewableItemsChanged) {\n      _this._viewabilityTuples.push({\n        viewabilityHelper: new ViewabilityHelper(_this.props.viewabilityConfig),\n        onViewableItemsChanged: _this.props.onViewableItemsChanged\n      });\n    }\n\n    var initialState = {\n      first: _this.props.initialScrollIndex || 0,\n      last: Math.min(_this.props.getItemCount(_this.props.data), (_this.props.initialScrollIndex || 0) + _this.props.initialNumToRender) - 1\n    };\n\n    if (_this._isNestedWithSameOrientation()) {\n      var storedState = _this.context.virtualizedList.getNestedChildState(_this.props.listKey || _this._getCellKey());\n\n      if (storedState) {\n        initialState = storedState;\n        _this.state = storedState;\n        _this._frames = storedState.frames;\n      }\n    }\n\n    _this.state = initialState;\n    return _this;\n  }\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this._isNestedWithSameOrientation()) {\n      this.context.virtualizedList.registerAsNestedChild({\n        cellKey: this._getCellKey(),\n        key: this.props.listKey || this._getCellKey(),\n        ref: this\n      });\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this._isNestedWithSameOrientation()) {\n      this.context.virtualizedList.unregisterAsNestedChild({\n        key: this.props.listKey || this._getCellKey(),\n        state: {\n          first: this.state.first,\n          last: this.state.last,\n          frames: this._frames\n        }\n      });\n    }\n\n    this._updateViewableItems(null);\n\n    this._updateCellsToRenderBatcher.dispose({\n      abort: true\n    });\n\n    this._viewabilityTuples.forEach(function (tuple) {\n      tuple.viewabilityHelper.dispose();\n    });\n\n    this._fillRateHelper.deactivateAndFlush();\n  };\n\n  VirtualizedList.getDerivedStateFromProps = function getDerivedStateFromProps(newProps, prevState) {\n    var data = newProps.data,\n        getItemCount = newProps.getItemCount,\n        maxToRenderPerBatch = newProps.maxToRenderPerBatch; // first and last could be stale (e.g. if a new, shorter items props is passed in), so we make\n    // sure we're rendering a reasonable range here.\n\n    return {\n      first: Math.max(0, Math.min(prevState.first, getItemCount(data) - 1 - maxToRenderPerBatch)),\n      last: Math.max(0, Math.min(prevState.last, getItemCount(data) - 1))\n    };\n  };\n\n  _proto._pushCells = function _pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, first, last, inversionStyle) {\n    var _this2 = this;\n\n    var _this$props6 = this.props,\n        CellRendererComponent = _this$props6.CellRendererComponent,\n        ItemSeparatorComponent = _this$props6.ItemSeparatorComponent,\n        data = _this$props6.data,\n        getItem = _this$props6.getItem,\n        getItemCount = _this$props6.getItemCount,\n        horizontal = _this$props6.horizontal,\n        keyExtractor = _this$props6.keyExtractor;\n    var stickyOffset = this.props.ListHeaderComponent ? 1 : 0;\n    var end = getItemCount(data) - 1;\n    var prevCellKey;\n    last = Math.min(end, last);\n\n    var _loop = function _loop(ii) {\n      var item = getItem(data, ii);\n      var key = keyExtractor(item, ii);\n\n      _this2._indicesToKeys.set(ii, key);\n\n      if (stickyIndicesFromProps.has(ii + stickyOffset)) {\n        stickyHeaderIndices.push(cells.length);\n      }\n\n      cells.push(React.createElement(CellRenderer, {\n        CellRendererComponent: CellRendererComponent,\n        ItemSeparatorComponent: ii < end ? ItemSeparatorComponent : undefined,\n        cellKey: key,\n        fillRateHelper: _this2._fillRateHelper,\n        horizontal: horizontal,\n        index: ii,\n        inversionStyle: inversionStyle,\n        item: item,\n        key: key,\n        prevCellKey: prevCellKey,\n        onUpdateSeparators: _this2._onUpdateSeparators,\n        onLayout: function onLayout(e) {\n          return _this2._onCellLayout(e, key, ii);\n        },\n        onUnmount: _this2._onCellUnmount,\n        parentProps: _this2.props,\n        ref: function ref(_ref2) {\n          _this2._cellRefs[key] = _ref2;\n        }\n      }));\n      prevCellKey = key;\n    };\n\n    for (var ii = first; ii <= last; ii++) {\n      _loop(ii);\n    }\n  };\n\n  _proto._isVirtualizationDisabled = function _isVirtualizationDisabled() {\n    return this.props.disableVirtualization || false;\n  };\n\n  _proto._isNestedWithSameOrientation = function _isNestedWithSameOrientation() {\n    var nestedContext = this.context.virtualizedList;\n    return !!(nestedContext && !!nestedContext.horizontal === !!this.props.horizontal);\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    if (__DEV__) {\n      var flatStyles = flattenStyle(this.props.contentContainerStyle);\n      warning(flatStyles == null || flatStyles.flexWrap !== 'wrap', '`flexWrap: `wrap`` is not supported with the `VirtualizedList` components.' + 'Consider using `numColumns` with `FlatList` instead.');\n    }\n\n    var _this$props7 = this.props,\n        ListEmptyComponent = _this$props7.ListEmptyComponent,\n        ListFooterComponent = _this$props7.ListFooterComponent,\n        ListHeaderComponent = _this$props7.ListHeaderComponent;\n    var _this$props8 = this.props,\n        data = _this$props8.data,\n        horizontal = _this$props8.horizontal;\n\n    var isVirtualizationDisabled = this._isVirtualizationDisabled();\n\n    var inversionStyle = this.props.inverted ? this.props.horizontal ? styles.horizontallyInverted : styles.verticallyInverted : null;\n    var cells = [];\n    var stickyIndicesFromProps = new Set(this.props.stickyHeaderIndices);\n    var stickyHeaderIndices = [];\n\n    if (ListHeaderComponent) {\n      if (stickyIndicesFromProps.has(0)) {\n        stickyHeaderIndices.push(0);\n      }\n\n      var element = React.isValidElement(ListHeaderComponent) ? ListHeaderComponent : // $FlowFixMe\n      React.createElement(ListHeaderComponent, null);\n      cells.push(React.createElement(VirtualizedCellWrapper, {\n        cellKey: this._getCellKey() + '-header',\n        key: \"$header\"\n      }, React.createElement(View, {\n        onLayout: this._onLayoutHeader,\n        style: StyleSheet.compose(inversionStyle, this.props.ListHeaderComponentStyle)\n      }, // $FlowFixMe - Typing ReactNativeComponent revealed errors\n      element)));\n    }\n\n    var itemCount = this.props.getItemCount(data);\n\n    if (itemCount > 0) {\n      _usedIndexForKey = false;\n      _keylessItemComponentName = '';\n      var spacerKey = !horizontal ? 'height' : 'width';\n      var lastInitialIndex = this.props.initialScrollIndex ? -1 : this.props.initialNumToRender - 1;\n      var _this$state = this.state,\n          first = _this$state.first,\n          last = _this$state.last;\n\n      this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, 0, lastInitialIndex, inversionStyle);\n\n      var firstAfterInitial = Math.max(lastInitialIndex + 1, first);\n\n      if (!isVirtualizationDisabled && first > lastInitialIndex + 1) {\n        var insertedStickySpacer = false;\n\n        if (stickyIndicesFromProps.size > 0) {\n          var stickyOffset = ListHeaderComponent ? 1 : 0; // See if there are any sticky headers in the virtualized space that we need to render.\n\n          for (var ii = firstAfterInitial - 1; ii > lastInitialIndex; ii--) {\n            if (stickyIndicesFromProps.has(ii + stickyOffset)) {\n              var _ref3, _ref4;\n\n              var initBlock = this._getFrameMetricsApprox(lastInitialIndex);\n\n              var stickyBlock = this._getFrameMetricsApprox(ii);\n\n              var leadSpace = stickyBlock.offset - initBlock.offset - (this.props.initialScrollIndex ? 0 : initBlock.length);\n              cells.push(React.createElement(View, {\n                key: \"$sticky_lead\",\n                style: (_ref3 = {}, _ref3[spacerKey] = leadSpace, _ref3)\n              }));\n\n              this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, ii, ii, inversionStyle);\n\n              var trailSpace = this._getFrameMetricsApprox(first).offset - (stickyBlock.offset + stickyBlock.length);\n              cells.push(React.createElement(View, {\n                key: \"$sticky_trail\",\n                style: (_ref4 = {}, _ref4[spacerKey] = trailSpace, _ref4)\n              }));\n              insertedStickySpacer = true;\n              break;\n            }\n          }\n        }\n\n        if (!insertedStickySpacer) {\n          var _ref5;\n\n          var _initBlock = this._getFrameMetricsApprox(lastInitialIndex);\n\n          var firstSpace = this._getFrameMetricsApprox(first).offset - (_initBlock.offset + _initBlock.length);\n\n          cells.push(React.createElement(View, {\n            key: \"$lead_spacer\",\n            style: (_ref5 = {}, _ref5[spacerKey] = firstSpace, _ref5)\n          }));\n        }\n      }\n\n      this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, firstAfterInitial, last, inversionStyle);\n\n      if (!this._hasWarned.keys && _usedIndexForKey) {\n        console.warn('VirtualizedList: missing keys for items, make sure to specify a key or id property on each ' + 'item or provide a custom keyExtractor.', _keylessItemComponentName);\n        this._hasWarned.keys = true;\n      }\n\n      if (!isVirtualizationDisabled && last < itemCount - 1) {\n        var _ref6;\n\n        var lastFrame = this._getFrameMetricsApprox(last); // Without getItemLayout, we limit our tail spacer to the _highestMeasuredFrameIndex to\n        // prevent the user for hyperscrolling into un-measured area because otherwise content will\n        // likely jump around as it renders in above the viewport.\n\n\n        var end = this.props.getItemLayout ? itemCount - 1 : Math.min(itemCount - 1, this._highestMeasuredFrameIndex);\n\n        var endFrame = this._getFrameMetricsApprox(end);\n\n        var tailSpacerLength = endFrame.offset + endFrame.length - (lastFrame.offset + lastFrame.length);\n        cells.push(React.createElement(View, {\n          key: \"$tail_spacer\",\n          style: (_ref6 = {}, _ref6[spacerKey] = tailSpacerLength, _ref6)\n        }));\n      }\n    } else if (ListEmptyComponent) {\n      var _element = React.isValidElement(ListEmptyComponent) ? ListEmptyComponent : // $FlowFixMe\n      React.createElement(ListEmptyComponent, null);\n\n      cells.push(React.cloneElement(_element, {\n        key: '$empty',\n        onLayout: function onLayout(event) {\n          _this3._onLayoutEmpty(event);\n\n          if (_element.props.onLayout) {\n            _element.props.onLayout(event);\n          }\n        },\n        style: StyleSheet.compose(inversionStyle, _element.props.style)\n      }));\n    }\n\n    if (ListFooterComponent) {\n      var _element2 = React.isValidElement(ListFooterComponent) ? ListFooterComponent : // $FlowFixMe\n      React.createElement(ListFooterComponent, null);\n\n      cells.push(React.createElement(VirtualizedCellWrapper, {\n        cellKey: this._getCellKey() + '-footer',\n        key: \"$footer\"\n      }, React.createElement(View, {\n        onLayout: this._onLayoutFooter,\n        style: StyleSheet.compose(inversionStyle, this.props.ListFooterComponentStyle)\n      }, // $FlowFixMe - Typing ReactNativeComponent revealed errors\n      _element2)));\n    }\n\n    var scrollProps = _objectSpread({}, this.props, {\n      onContentSizeChange: this._onContentSizeChange,\n      onLayout: this._onLayout,\n      onScroll: this._onScroll,\n      onScrollBeginDrag: this._onScrollBeginDrag,\n      onScrollEndDrag: this._onScrollEndDrag,\n      onMomentumScrollEnd: this._onMomentumScrollEnd,\n      scrollEventThrottle: this.props.scrollEventThrottle,\n      // TODO: Android support\n      invertStickyHeaders: this.props.invertStickyHeaders !== undefined ? this.props.invertStickyHeaders : this.props.inverted,\n      stickyHeaderIndices: stickyHeaderIndices\n    });\n\n    if (inversionStyle) {\n      /* $FlowFixMe(>=0.70.0 site=react_native_fb) This comment suppresses an\n       * error found when Flow v0.70 was deployed. To see the error delete\n       * this comment and run Flow. */\n      scrollProps.style = [inversionStyle, this.props.style];\n    }\n\n    this._hasMore = this.state.last < this.props.getItemCount(this.props.data) - 1;\n    var ret = React.cloneElement((this.props.renderScrollComponent || this._defaultRenderScrollComponent)(scrollProps), {\n      ref: this._captureScrollRef\n    }, cells);\n\n    if (this.props.debug) {\n      return React.createElement(View, {\n        style: styles.debug\n      }, ret, this._renderDebugOverlay());\n    } else {\n      return ret;\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this$props9 = this.props,\n        data = _this$props9.data,\n        extraData = _this$props9.extraData;\n\n    if (data !== prevProps.data || extraData !== prevProps.extraData) {\n      this._hasDataChangedSinceEndReached = true; // clear the viewableIndices cache to also trigger\n      // the onViewableItemsChanged callback with the new data\n\n      this._viewabilityTuples.forEach(function (tuple) {\n        tuple.viewabilityHelper.resetViewableIndices();\n      });\n    } // The `this._hiPriInProgress` is guaranteeing a hiPri cell update will only happen\n    // once per fiber update. The `_scheduleCellsToRenderUpdate` will set it to true\n    // if a hiPri update needs to perform. If `componentDidUpdate` is triggered with\n    // `this._hiPriInProgress=true`, means it's triggered by the hiPri update. The\n    // `_scheduleCellsToRenderUpdate` will check this condition and not perform\n    // another hiPri update.\n\n\n    var hiPriInProgress = this._hiPriInProgress;\n\n    this._scheduleCellsToRenderUpdate(); // Make sure setting `this._hiPriInProgress` back to false after `componentDidUpdate`\n    // is triggered with `this._hiPriInProgress = true`\n\n\n    if (hiPriInProgress) {\n      this._hiPriInProgress = false;\n    }\n  };\n\n  _proto._computeBlankness = function _computeBlankness() {\n    this._fillRateHelper.computeBlankness(this.props, this.state, this._scrollMetrics);\n  } // $FlowFixMe\n  ;\n\n  // $FlowFixMe\n  _proto._onCellLayout = function _onCellLayout(e, cellKey, index) {\n    var layout = e.nativeEvent.layout;\n    var next = {\n      offset: this._selectOffset(layout),\n      length: this._selectLength(layout),\n      index: index,\n      inLayout: true\n    };\n    var curr = this._frames[cellKey];\n\n    if (!curr || next.offset !== curr.offset || next.length !== curr.length || index !== curr.index) {\n      this._totalCellLength += next.length - (curr ? curr.length : 0);\n      this._totalCellsMeasured += curr ? 0 : 1;\n      this._averageCellLength = this._totalCellLength / this._totalCellsMeasured;\n      this._frames[cellKey] = next;\n      this._highestMeasuredFrameIndex = Math.max(this._highestMeasuredFrameIndex, index);\n\n      this._scheduleCellsToRenderUpdate();\n    } else {\n      this._frames[cellKey].inLayout = true;\n    }\n\n    var childListKeys = this._cellKeysToChildListKeys.get(cellKey);\n\n    if (childListKeys) {\n      for (var _iterator2 = childListKeys, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref7;\n\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) break;\n          _ref7 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) break;\n          _ref7 = _i2.value;\n        }\n\n        var childKey = _ref7;\n\n        var childList = this._nestedChildLists.get(childKey);\n\n        childList && childList.ref && childList.ref.measureLayoutRelativeToContainingList();\n      }\n    }\n\n    this._computeBlankness();\n\n    this._updateViewableItems(this.props.data);\n  };\n\n  _proto.measureLayoutRelativeToContainingList = function measureLayoutRelativeToContainingList() {\n    var _this4 = this;\n\n    // TODO (T35574538): findNodeHandle sometimes crashes with \"Unable to find\n    // node on an unmounted component\" during scrolling\n    try {\n      if (!this._scrollRef) {\n        return;\n      } // We are asuming that getOutermostParentListRef().getScrollRef()\n      // is a non-null reference to a ScrollView\n\n\n      this._scrollRef.measureLayout(this.context.virtualizedList.getOutermostParentListRef().getScrollRef().getNativeScrollRef(), function (x, y, width, height) {\n        _this4._offsetFromParentVirtualizedList = _this4._selectOffset({\n          x: x,\n          y: y\n        });\n        _this4._scrollMetrics.contentLength = _this4._selectLength({\n          width: width,\n          height: height\n        });\n\n        var scrollMetrics = _this4._convertParentScrollMetrics(_this4.context.virtualizedList.getScrollMetrics());\n\n        _this4._scrollMetrics.visibleLength = scrollMetrics.visibleLength;\n        _this4._scrollMetrics.offset = scrollMetrics.offset;\n      }, function (error) {\n        console.warn(\"VirtualizedList: Encountered an error while measuring a list's\" + ' offset from its containing VirtualizedList.');\n      });\n    } catch (error) {\n      console.warn('measureLayoutRelativeToContainingList threw an error', error.stack);\n    }\n  };\n\n  _proto._renderDebugOverlay = function _renderDebugOverlay() {\n    var normalize = this._scrollMetrics.visibleLength / (this._scrollMetrics.contentLength || 1);\n    var framesInLayout = [];\n    var itemCount = this.props.getItemCount(this.props.data);\n\n    for (var ii = 0; ii < itemCount; ii++) {\n      var frame = this._getFrameMetricsApprox(ii);\n      /* $FlowFixMe(>=0.68.0 site=react_native_fb) This comment suppresses an\n       * error found when Flow v0.68 was deployed. To see the error delete this\n       * comment and run Flow. */\n\n\n      if (frame.inLayout) {\n        framesInLayout.push(frame);\n      }\n    }\n\n    var windowTop = this._getFrameMetricsApprox(this.state.first).offset;\n\n    var frameLast = this._getFrameMetricsApprox(this.state.last);\n\n    var windowLen = frameLast.offset + frameLast.length - windowTop;\n    var visTop = this._scrollMetrics.offset;\n    var visLen = this._scrollMetrics.visibleLength;\n    return React.createElement(View, {\n      style: [styles.debugOverlayBase, styles.debugOverlay]\n    }, framesInLayout.map(function (f, ii) {\n      return React.createElement(View, {\n        key: 'f' + ii,\n        style: [styles.debugOverlayBase, styles.debugOverlayFrame, {\n          top: f.offset * normalize,\n          height: f.length * normalize\n        }]\n      });\n    }), React.createElement(View, {\n      style: [styles.debugOverlayBase, styles.debugOverlayFrameLast, {\n        top: windowTop * normalize,\n        height: windowLen * normalize\n      }]\n    }), React.createElement(View, {\n      style: [styles.debugOverlayBase, styles.debugOverlayFrameVis, {\n        top: visTop * normalize,\n        height: visLen * normalize\n      }]\n    }));\n  };\n\n  _proto._selectLength = function _selectLength(metrics) {\n    return !this.props.horizontal ? metrics.height : metrics.width;\n  };\n\n  _proto._selectOffset = function _selectOffset(metrics) {\n    return !this.props.horizontal ? metrics.y : metrics.x;\n  };\n\n  _proto._maybeCallOnEndReached = function _maybeCallOnEndReached() {\n    var _this$props10 = this.props,\n        data = _this$props10.data,\n        getItemCount = _this$props10.getItemCount,\n        onEndReached = _this$props10.onEndReached,\n        onEndReachedThreshold = _this$props10.onEndReachedThreshold;\n    var _this$_scrollMetrics2 = this._scrollMetrics,\n        contentLength = _this$_scrollMetrics2.contentLength,\n        visibleLength = _this$_scrollMetrics2.visibleLength,\n        offset = _this$_scrollMetrics2.offset;\n    var distanceFromEnd = contentLength - visibleLength - offset;\n\n    if (onEndReached && this.state.last === getItemCount(data) - 1 &&\n    /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment suppresses an\n     * error found when Flow v0.63 was deployed. To see the error delete this\n     * comment and run Flow. */\n    distanceFromEnd < onEndReachedThreshold * visibleLength && (this._hasDataChangedSinceEndReached || this._scrollMetrics.contentLength !== this._sentEndForContentLength)) {\n      // Only call onEndReached once for a given dataset + content length.\n      this._hasDataChangedSinceEndReached = false;\n      this._sentEndForContentLength = this._scrollMetrics.contentLength;\n      onEndReached({\n        distanceFromEnd: distanceFromEnd\n      });\n    }\n  };\n\n  _proto._scheduleCellsToRenderUpdate = function _scheduleCellsToRenderUpdate() {\n    var _this$state2 = this.state,\n        first = _this$state2.first,\n        last = _this$state2.last;\n    var _this$_scrollMetrics3 = this._scrollMetrics,\n        offset = _this$_scrollMetrics3.offset,\n        visibleLength = _this$_scrollMetrics3.visibleLength,\n        velocity = _this$_scrollMetrics3.velocity;\n    var itemCount = this.props.getItemCount(this.props.data);\n    var hiPri = false;\n    var scrollingThreshold =\n    /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment suppresses an\n     * error found when Flow v0.63 was deployed. To see the error delete\n     * this comment and run Flow. */\n    this.props.onEndReachedThreshold * visibleLength / 2; // Mark as high priority if we're close to the start of the first item\n    // But only if there are items before the first rendered item\n\n    if (first > 0) {\n      var distTop = offset - this._getFrameMetricsApprox(first).offset;\n\n      hiPri = hiPri || distTop < 0 || velocity < -2 && distTop < scrollingThreshold;\n    } // Mark as high priority if we're close to the end of the last item\n    // But only if there are items after the last rendered item\n\n\n    if (last < itemCount - 1) {\n      var distBottom = this._getFrameMetricsApprox(last).offset - (offset + visibleLength);\n      hiPri = hiPri || distBottom < 0 || velocity > 2 && distBottom < scrollingThreshold;\n    } // Only trigger high-priority updates if we've actually rendered cells,\n    // and with that size estimate, accurately compute how many cells we should render.\n    // Otherwise, it would just render as many cells as it can (of zero dimension),\n    // each time through attempting to render more (limited by maxToRenderPerBatch),\n    // starving the renderer from actually laying out the objects and computing _averageCellLength.\n    // If this is triggered in an `componentDidUpdate` followed by a hiPri cellToRenderUpdate\n    // We shouldn't do another hipri cellToRenderUpdate\n\n\n    if (hiPri && (this._averageCellLength || this.props.getItemLayout) && !this._hiPriInProgress) {\n      this._hiPriInProgress = true; // Don't worry about interactions when scrolling quickly; focus on filling content as fast\n      // as possible.\n\n      this._updateCellsToRenderBatcher.dispose({\n        abort: true\n      });\n\n      this._updateCellsToRender();\n\n      return;\n    } else {\n      this._updateCellsToRenderBatcher.schedule();\n    }\n  } // $FlowFixMe\n  ;\n\n  _proto._updateViewableItems = function _updateViewableItems(data) {\n    var _this5 = this;\n\n    var getItemCount = this.props.getItemCount;\n\n    this._viewabilityTuples.forEach(function (tuple) {\n      tuple.viewabilityHelper.onUpdate(getItemCount(data), _this5._scrollMetrics.offset, _this5._scrollMetrics.visibleLength, _this5._getFrameMetrics, _this5._createViewToken, tuple.onViewableItemsChanged, _this5.state);\n    });\n  };\n\n  return VirtualizedList;\n}(React.PureComponent);\n\nVirtualizedList.defaultProps = {\n  disableVirtualization: false,\n  horizontal: false,\n  initialNumToRender: 10,\n  keyExtractor: function keyExtractor(item, index) {\n    if (item.key != null) {\n      return item.key;\n    }\n\n    if (item.id != null) {\n      return item.id;\n    }\n\n    _usedIndexForKey = true;\n\n    if (item.type && item.type.displayName) {\n      _keylessItemComponentName = item.type.displayName;\n    }\n\n    return String(index);\n  },\n  maxToRenderPerBatch: 10,\n  onEndReachedThreshold: 2,\n  // multiples of length\n  scrollEventThrottle: 50,\n  updateCellsBatchingPeriod: 50,\n  windowSize: 21 // multiples of length\n\n};\nVirtualizedList.contextTypes = {\n  virtualizedCell: PropTypes.shape({\n    cellKey: PropTypes.string\n  }),\n  virtualizedList: PropTypes.shape({\n    getScrollMetrics: PropTypes.func,\n    horizontal: PropTypes.bool,\n    getOutermostParentListRef: PropTypes.func,\n    getNestedChildState: PropTypes.func,\n    registerAsNestedChild: PropTypes.func,\n    unregisterAsNestedChild: PropTypes.func\n  })\n};\nVirtualizedList.childContextTypes = {\n  virtualizedList: PropTypes.shape({\n    getScrollMetrics: PropTypes.func,\n    horizontal: PropTypes.bool,\n    getOutermostParentListRef: PropTypes.func,\n    getNestedChildState: PropTypes.func,\n    registerAsNestedChild: PropTypes.func,\n    unregisterAsNestedChild: PropTypes.func\n  })\n};\n\nvar CellRenderer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(CellRenderer, _React$Component);\n\n  function CellRenderer() {\n    var _this6;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this6 = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this6.state = {\n      separatorProps: {\n        highlighted: false,\n        leadingItem: _this6.props.item\n      }\n    };\n    _this6._separators = {\n      highlight: function highlight() {\n        var _this6$props = _this6.props,\n            cellKey = _this6$props.cellKey,\n            prevCellKey = _this6$props.prevCellKey;\n\n        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {\n          highlighted: true\n        });\n      },\n      unhighlight: function unhighlight() {\n        var _this6$props2 = _this6.props,\n            cellKey = _this6$props2.cellKey,\n            prevCellKey = _this6$props2.prevCellKey;\n\n        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {\n          highlighted: false\n        });\n      },\n      updateProps: function updateProps(select, newProps) {\n        var _this6$props3 = _this6.props,\n            cellKey = _this6$props3.cellKey,\n            prevCellKey = _this6$props3.prevCellKey;\n\n        _this6.props.onUpdateSeparators([select === 'leading' ? prevCellKey : cellKey], newProps);\n      }\n    };\n    return _this6;\n  }\n\n  var _proto2 = CellRenderer.prototype;\n\n  _proto2.getChildContext = function getChildContext() {\n    return {\n      virtualizedCell: {\n        cellKey: this.props.cellKey\n      }\n    };\n  } // TODO: consider factoring separator stuff out of VirtualizedList into FlatList since it's not\n  // reused by SectionList and we can keep VirtualizedList simpler.\n  ;\n\n  _proto2.updateSeparatorProps = function updateSeparatorProps(newProps) {\n    this.setState(function (state) {\n      return {\n        separatorProps: _objectSpread({}, state.separatorProps, {}, newProps)\n      };\n    });\n  };\n\n  _proto2.componentWillUnmount = function componentWillUnmount() {\n    this.props.onUnmount(this.props.cellKey);\n  };\n\n  _proto2.render = function render() {\n    var _this$props11 = this.props,\n        CellRendererComponent = _this$props11.CellRendererComponent,\n        ItemSeparatorComponent = _this$props11.ItemSeparatorComponent,\n        fillRateHelper = _this$props11.fillRateHelper,\n        horizontal = _this$props11.horizontal,\n        item = _this$props11.item,\n        index = _this$props11.index,\n        inversionStyle = _this$props11.inversionStyle,\n        parentProps = _this$props11.parentProps;\n    var renderItem = parentProps.renderItem,\n        getItemLayout = parentProps.getItemLayout;\n    invariant(renderItem, 'no renderItem!');\n    var element = renderItem({\n      item: item,\n      index: index,\n      separators: this._separators\n    });\n    var onLayout =\n    /* $FlowFixMe(>=0.68.0 site=react_native_fb) This comment suppresses an\n     * error found when Flow v0.68 was deployed. To see the error delete this\n     * comment and run Flow. */\n    getItemLayout && !parentProps.debug && !fillRateHelper.enabled() ? undefined : this.props.onLayout; // NOTE: that when this is a sticky header, `onLayout` will get automatically extracted and\n    // called explicitly by `ScrollViewStickyHeader`.\n\n    var itemSeparator = ItemSeparatorComponent && React.createElement(ItemSeparatorComponent, this.state.separatorProps);\n    var cellStyle = inversionStyle ? horizontal ? [styles.rowReverse, inversionStyle] : [styles.columnReverse, inversionStyle] : horizontal ? [styles.row, inversionStyle] : inversionStyle;\n\n    if (!CellRendererComponent) {\n      return (\n        /* $FlowFixMe(>=0.89.0 site=react_native_fb) This comment suppresses an\n         * error found when Flow v0.89 was deployed. To see the error, delete\n         * this comment and run Flow. */\n        React.createElement(View, {\n          style: cellStyle,\n          onLayout: onLayout\n        }, element, itemSeparator)\n      );\n    }\n\n    return React.createElement(CellRendererComponent, _extends({}, this.props, {\n      style: cellStyle,\n      onLayout: onLayout\n    }), element, itemSeparator);\n  };\n\n  return CellRenderer;\n}(React.Component);\n\nCellRenderer.childContextTypes = {\n  virtualizedCell: PropTypes.shape({\n    cellKey: PropTypes.string\n  })\n};\n\nvar VirtualizedCellWrapper =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inheritsLoose(VirtualizedCellWrapper, _React$Component2);\n\n  function VirtualizedCellWrapper() {\n    return _React$Component2.apply(this, arguments) || this;\n  }\n\n  var _proto3 = VirtualizedCellWrapper.prototype;\n\n  _proto3.getChildContext = function getChildContext() {\n    return {\n      virtualizedCell: {\n        cellKey: this.props.cellKey\n      }\n    };\n  };\n\n  _proto3.render = function render() {\n    return this.props.children;\n  };\n\n  return VirtualizedCellWrapper;\n}(React.Component);\n\nVirtualizedCellWrapper.childContextTypes = {\n  virtualizedCell: PropTypes.shape({\n    cellKey: PropTypes.string\n  })\n};\nvar styles = StyleSheet.create({\n  verticallyInverted: {\n    transform: [{\n      scaleY: -1\n    }]\n  },\n  horizontallyInverted: {\n    transform: [{\n      scaleX: -1\n    }]\n  },\n  row: {\n    flexDirection: 'row'\n  },\n  rowReverse: {\n    flexDirection: 'row-reverse'\n  },\n  columnReverse: {\n    flexDirection: 'column-reverse'\n  },\n  debug: {\n    flex: 1\n  },\n  debugOverlayBase: {\n    position: 'absolute',\n    top: 0,\n    right: 0\n  },\n  debugOverlay: {\n    bottom: 0,\n    width: 20,\n    borderColor: 'blue',\n    borderWidth: 1\n  },\n  debugOverlayFrame: {\n    left: 0,\n    backgroundColor: 'orange'\n  },\n  debugOverlayFrameLast: {\n    left: 0,\n    borderColor: 'green',\n    borderWidth: 2\n  },\n  debugOverlayFrameVis: {\n    left: 0,\n    borderColor: 'red',\n    borderWidth: 2\n  }\n});\nexport default VirtualizedList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}