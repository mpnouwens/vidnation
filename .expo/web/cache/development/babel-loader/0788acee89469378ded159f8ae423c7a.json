{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createModel } from '@rematch/core';\nexport var search = createModel()({\n  state: {\n    searchMoviesText: '',\n    searchMoviesData: [],\n    searchEpisodesText: '',\n    searchEpisodesData: [],\n    searchSeriesText: '',\n    searchSeriesData: [],\n    masterDetailData: {}\n  },\n  reducers: {\n    searchMoviesText: function searchMoviesText(state, searchSeriesText) {\n      return _objectSpread(_objectSpread({}, state), {}, {\n        searchSeriesText: searchSeriesText\n      });\n    },\n    searchMoviesData: function searchMoviesData(state, payload) {\n      return _objectSpread(_objectSpread({}, state), payload);\n    },\n    searchEpisodesText: function searchEpisodesText(state, searchSeriesText) {\n      return _objectSpread(_objectSpread({}, state), {}, {\n        searchSeriesText: searchSeriesText\n      });\n    },\n    searchEpisodesData: function searchEpisodesData(state, payload) {\n      return _objectSpread(_objectSpread({}, state), payload);\n    },\n    searchSeriesText: function searchSeriesText(state, _searchSeriesText) {\n      return _objectSpread(_objectSpread({}, state), {}, {\n        searchSeriesText: _searchSeriesText\n      });\n    },\n    searchSeriesData: function searchSeriesData(state, payload) {\n      return _objectSpread(_objectSpread({}, state), payload);\n    },\n    masterDetailData: function masterDetailData(state, payload) {\n      return _objectSpread(_objectSpread({}, state), payload);\n    }\n  },\n  effects: function effects(dispatch) {\n    return {\n      searchSeriesAsync: function searchSeriesAsync(payload, state) {\n        var response;\n        return _regeneratorRuntime.async(function searchSeriesAsync$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(fetch(\"http://www.omdbapi.com/?apikey=597bf54e&s=\" + payload + \"&type=series\").then(function (response) {\n                  return response.json();\n                }).then(function (responseJson) {\n                  dispatch.search.searchSeriesData({\n                    searchSeriesData: responseJson\n                  });\n                }).catch(function (error) {\n                  alert('error!');\n                }));\n\n              case 2:\n                response = _context.sent;\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      },\n      masterDetailAsync: function masterDetailAsync(payload, state) {\n        var response;\n        return _regeneratorRuntime.async(function masterDetailAsync$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _regeneratorRuntime.awrap(fetch(\"http://www.omdbapi.com/?apikey=597bf54e&i=\" + payload + \"&plot=full\").then(function (response) {\n                  return response.json();\n                }).then(function (responseJson) {\n                  console.log('responseJson', responseJson);\n                  dispatch.search.masterDetailData({\n                    masterDetailData: responseJson\n                  });\n                }).catch(function (error) {\n                  alert('error!');\n                }));\n\n              case 2:\n                response = _context2.sent;\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    };\n  }\n});","map":{"version":3,"sources":["/Users/michaelnouwens/Documents/GitHub/vidnation/store/search.ts"],"names":["createModel","search","state","searchMoviesText","searchMoviesData","searchEpisodesText","searchEpisodesData","searchSeriesText","searchSeriesData","masterDetailData","reducers","payload","effects","dispatch","searchSeriesAsync","fetch","then","response","json","responseJson","catch","error","alert","masterDetailAsync","console","log"],"mappings":"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","sourcesContent":["import { createModel, Reducer } from '@rematch/core'\nimport { RootModel } from './models'\n\nexport const search = createModel<RootModel>()({\n    state: {\n        searchMoviesText: '',\n        searchMoviesData: [],\n        searchEpisodesText: '',\n        searchEpisodesData: [],\n        searchSeriesText: '',\n        searchSeriesData: [],\n        masterDetailData: {}\n    },\n    reducers: {\n        searchMoviesText(state, searchSeriesText: string) {\n            return {\n                ...state,\n                searchSeriesText\n            }\n        },\n        searchMoviesData(state, payload: Object) {\n            return { ...state, ...payload };\n        },\n        searchEpisodesText(state, searchSeriesText: string) {\n            return {\n                ...state,\n                searchSeriesText\n            }\n        },\n        searchEpisodesData(state, payload: Object) {\n            return { ...state, ...payload };\n        },\n        searchSeriesText(state, searchSeriesText: string) {\n            return {\n                ...state,\n                searchSeriesText\n            }\n        },\n        searchSeriesData(state, payload: Object) {\n            return { ...state, ...payload };\n        },\n        masterDetailData(state, payload: Object) {\n            return { ...state, ...payload };\n        }\n    },\n    effects: (dispatch) => ({\n        // handle state changes with impure functions.\n        // use async/await for async actions\n        async searchSeriesAsync(payload: string, state) {\n            // wait for data to load\n            const response = await fetch(`http://www.omdbapi.com/?apikey=597bf54e&s=${payload}&type=series`)\n                // const data = await response.json()\n\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    dispatch.search.searchSeriesData({ searchSeriesData: responseJson });\n                }).catch((error) => {\n                    alert('error!');\n                });\n            // pass the result to a local reducer\n\n            // await new Promise(resolve => setTimeout(resolve, 1000))\n            // dispatch.search.searchSeriesData({ searchSeriesData: data });\n\n        },\n        async masterDetailAsync(payload: string, state) {\n            const response = await fetch(`http://www.omdbapi.com/?apikey=597bf54e&i=${payload}&plot=full`)\n                // const data = await response.json()\n\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    console.log('responseJson', responseJson)\n                    dispatch.search.masterDetailData({ masterDetailData: responseJson });\n                }).catch((error) => {\n                    alert('error!');\n                });\n        }\n    })\n})\n"]},"metadata":{},"sourceType":"module"}